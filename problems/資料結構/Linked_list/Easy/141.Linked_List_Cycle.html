<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>Linked List Cycle è¦–è¦ºåŒ–</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 2rem;
      background: #f5f7fa;
    }
    h1 {
      text-align: center;
      color: #007acc;
    }
    .description {
      max-width: 800px;
      margin: 0 auto 2rem;
      background: #fff;
      padding: 1rem;
      border-radius: 10px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    .list {
      display: flex;
      justify-content: center;
      align-items: center;
      flex-wrap: wrap;
      margin-top: 2rem;
    }
    .node {
      position: relative;
      margin: 10px;
      padding: 10px 16px;
      background: #3498db;
      color: white;
      border-radius: 10px;
      font-weight: bold;
    }
    .node::after {
      content: "â†’";
      position: absolute;
      right: -18px;
      top: 50%;
      transform: translateY(-50%);
      font-size: 20px;
      color: #444;
    }
    .node:last-child::after {
      display: none;
    }
    .pointer {
      position: absolute;
      top: -25px;
      left: 50%;
      transform: translateX(-50%);
      background: #e67e22;
      color: white;
      padding: 2px 6px;
      font-size: 12px;
      border-radius: 6px;
    }
    .pointer.fast {
      background: #e74c3c;
    }
    .pointer.slow {
      background: #2ecc71;
    }
    #controls {
      text-align: center;
      margin-top: 2rem;
    }
    button {
      padding: 10px 16px;
      font-size: 16px;
      background: #007acc;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      margin: 0 10px;
    }
    #result {
      text-align: center;
      font-size: 20px;
      margin-top: 1rem;
      color: #c0392b;
    }
  
#codeBox {
  background: #272822;
  color: #f8f8f2;
  text-align: left;
  padding: 1rem;
  border-radius: 6px;
  max-width: 800px;
  margin: 2rem auto;
  font-family: monospace;
}
.code-line {
  padding: 2px 0;
}
.active-code {
  background-color: #444;
}
</style>

</head>
<body>

<div class="description">
  <h2>ğŸ“Œ é¡Œç›®æè¿°ï¼šLinked List Cycle</h2>
  <p>çµ¦å®šä¸€å€‹å–®å‘éˆè¡¨çš„ <code>head</code>ï¼Œåˆ¤æ–·è©²éˆè¡¨æ˜¯å¦åŒ…å« <strong>ç’° (cycle)</strong>ã€‚</p>
  <ul>
    <li>å¦‚æœå­˜åœ¨æŸå€‹ç¯€é»å¯ä»¥é€šéä¸æ–·è·Ÿéš¨ <code>next</code> æŒ‡é‡å›åˆ°è‡ªèº«ï¼Œå‰‡è©²éˆè¡¨å­˜åœ¨ç’°ã€‚</li>
    <li><strong>æ³¨æ„ï¼š</strong><code>pos</code> ç”¨ä¾†è¡¨ç¤ºå°¾éƒ¨ç¯€é»é€£æ¥çš„ä½ç½®ï¼Œä½†å®ƒä¸ä½œç‚ºåƒæ•¸å‚³éã€‚</li>
    <li><strong>è¿”å› true</strong> ä»£è¡¨å­˜åœ¨ç’°ï¼Œ<strong>è¿”å› false</strong> ä»£è¡¨ç„¡ç’°çµæ§‹ã€‚</li>
  </ul>

  <h3>ğŸ”¹ ç¯„ä¾‹</h3>
  <pre><code>Input: head = [3,2,0,-4]  (pos = 1)
Output: true

Input: head = [1,2]  (pos = 0)
Output: true

Input: head = [1]  (pos = -1)
Output: false</code></pre>

  <h3>ğŸ›  è§£æ³•ï¼šå¿«æ…¢æŒ‡é‡æ³• (Floyd's Tortoise and Hare)</h3>
  <p>ä½¿ç”¨ <strong>slow</strong> èˆ‡ <strong>fast</strong> å…©å€‹æŒ‡é‡ï¼š</p>
  <ul>
    <li>slow æ¯æ¬¡ç§»å‹• 1 æ­¥</li>
    <li>fast æ¯æ¬¡ç§»å‹• 2 æ­¥</li>
    <li>å¦‚æœ fast åˆ°é” null å‰‡ç„¡ç’°</li>
    <li>å¦‚æœ fast èˆ‡ slow ç›¸é‡ï¼Œå‰‡æœ‰ç’°</li>
  </ul>
</div>

<div id="codeBox">
  <div class="code-line" id="line1">1: while fast and fast.next:</div>
  <div class="code-line" id="line2">2: &nbsp;&nbsp;slow = slow.next</div>
  <div class="code-line" id="line3">3: &nbsp;&nbsp;fast = fast.next.next</div>
  <div class="code-line" id="line4">4: &nbsp;&nbsp;if slow == fast: return True</div>
  <div class="code-line" id="line5">5: return False</div>
</div>

  <h1>Floyd åˆ¤æ–·éˆçµä¸²åˆ—æ˜¯å¦æœ‰ç’°</h1>

  <div class="description">
    <p>ä½¿ç”¨å¿«æ…¢æŒ‡é‡ (Floyd's Tortoise and Hare Algorithm)ï¼Œæ¯æ¬¡é»é¸ã€Œä¸‹ä¸€æ­¥ã€åŸ·è¡Œä¸€è¼ªï¼š<br>
    ğŸ¢ æ…¢æŒ‡é‡èµ° 1 æ­¥ï¼ŒğŸ‡ å¿«æŒ‡é‡èµ° 2 æ­¥ã€‚<br>è‹¥ç›¸é‡ä»£è¡¨æœ‰ç’°ï¼Œè‹¥ fast èµ°åˆ° null å‰‡ç„¡ç’°ã€‚</p>
  </div>

  <div class="list" id="linkedList"></div>
  <div id="result"></div>

  <div id="controls">
    <button onclick="step()">ä¸‹ä¸€æ­¥</button>
    <button onclick="reset()">é‡ç½®</button>
  </div>

  <script>
    let nodes = [3,2,0,-4];
    let loopTo = 1; // å½¢æˆç’°ï¼Œæœ€å¾Œä¸€å€‹æŒ‡å‘ index 1
    let state = [];
    let fast = 0, slow = 0;
    let finished = false;

    function buildState() {
      state = nodes.map((val, idx) => ({ val, next: idx + 1 }));
      if (loopTo >= 0 && loopTo < state.length) {
        state[state.length - 1].next = loopTo;
      } else {
        state[state.length - 1].next = null;
      }
    }

    function render() {
      const container = document.getElementById("linkedList");
      container.innerHTML = "";
      for (let i = 0; i < state.length; i++) {
        const node = document.createElement("div");
        node.className = "node";
        node.innerText = state[i].val;
        if (i === fast && !finished) {
          const f = document.createElement("div");
          f.className = "pointer fast";
          f.innerText = "fast";
          node.appendChild(f);
        }
        if (i === slow && !finished) {
          const s = document.createElement("div");
          s.className = "pointer slow";
          s.innerText = "slow";
          node.appendChild(s);
        }
        container.appendChild(node);
      }
    }

    
function highlight(lineId) {
  document.querySelectorAll('.code-line').forEach(line => line.classList.remove("active-code"));
  if (lineId) {
    const el = document.getElementById(lineId);
    if (el) el.classList.add("active-code");
  }
}

function step() {
      if (finished) return;
      highlight("line1");
  if (fast == null || state[fast] == null || state[fast].next == null || state[state[fast].next] == null) {
        highlight("line5");
  document.getElementById("result").innerText = "âŒ ç„¡ç’° (No cycle)";
        finished = true;
        return;
      }
      highlight("line2");
  slow = state[slow].next;
      highlight("line3");
  fast = state[state[fast].next].next;

      highlight("line4");
  if (slow === fast) {
        document.getElementById("result").innerText = "âœ… æœ‰ç’° (Cycle detected)";
        finished = true;
        render();
        return;
      }

      render();
    }

    function reset() {
      fast = 0;
      slow = 0;
      finished = false;
      document.getElementById("result").innerText = "";
      buildState();
      render();
    }

    buildState();
    render();
  </script>
</body>
</html>
