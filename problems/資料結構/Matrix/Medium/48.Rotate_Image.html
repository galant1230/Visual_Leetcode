
<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>Rotate Image è¦–è¦ºåŒ–</title>
  <style>
    body { font-family: sans-serif; padding: 2rem; background: #f5f7fa; }
    h1 { text-align: center; color: #007acc; }
    .description {
      max-width: 800px;
      margin: 1rem auto;
      background: #fff;
      padding: 1rem;
      border-radius: 10px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    .tip {
      background: #fff8dc;
      padding: 1rem;
      margin-top: 1rem;
      border-left: 5px solid #f39c12;
      font-size: 14px;
    }
    .matrix {
      display: grid;
      justify-content: center;
      margin-top: 2rem;
      gap: 4px;
    }
    .cell {
      background: #3498db;
      color: white;
      padding: 12px;
      font-weight: bold;
      text-align: center;
      border-radius: 6px;
    }
    .highlight {
      background: #2ecc71 !important;
    }
    .code-line {
      font-family: monospace;
      padding: 2px 0;
    }
    .active-code {
      background: #444;
      color: white;
    }
    #codeBox {
      background: #272822;
      color: #f8f8f2;
      padding: 1rem;
      border-radius: 6px;
      max-width: 800px;
      margin: 2rem auto;
    }
    button {
      background: #007acc;
      color: white;
      padding: 10px 16px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      margin: 0.5rem;
    }
  </style>
</head>
<body>
<h1>Rotate Image (æ—‹è½‰åœ–åƒ) è¦–è¦ºåŒ–</h1>

<div class="description">
  <p><strong>é¡Œç›®æè¿°ï¼š</strong>å°‡ä¸€å€‹ n Ã— n çš„çŸ©é™£ã€Œé †æ™‚é‡æ—‹è½‰ 90 åº¦ã€ã€‚<br>å¿…é ˆå°±åœ° (in-place) æ“ä½œï¼Œä¸èƒ½ä½¿ç”¨é¡å¤–ç©ºé–“ã€‚</p>
  <p><strong>æ­¥é©Ÿï¼š</strong><br>
  1ï¸âƒ£ å…ˆæ²¿ä¸»å°è§’ç·šé€²è¡Œè½‰ç½® (transpose)<br>
  2ï¸âƒ£ å†åè½‰æ¯ä¸€åˆ— (reverse each row)
  </p>
  <div class="tip">
    ğŸ“Œ <strong>Tips:</strong><br>
    - ä¸»å°è§’ç·šç‚ºå¾å·¦ä¸Šåˆ°å³ä¸‹çš„å°è§’ç·š<br>
    - åœ¨åŸåœ°è™•ç†æ™‚ï¼Œå¸¸å¸¸åˆ©ç”¨è½‰ç½® + ç¿»è½‰æŠ€å·§<br>
    - é©ç”¨æ–¼ã€Œæ­£æ–¹å½¢çŸ©é™£ã€çš„ç¶“å…¸é¡Œå‹
  </div>
</div>

<div style="text-align:center;">
  <label>è¼¸å…¥çŸ©é™£ï¼ˆç”¨é€—è™Ÿåˆ†éš”æ¯åˆ—ï¼‰ï¼š</label><br>
  <textarea id="inputMatrix" rows="4" cols="40">1,2,3
4,5,6
7,8,9</textarea><br>
  <button onclick="start()">é–‹å§‹æ¨¡æ“¬</button>
</div>

<div id="matrixBox" class="matrix"></div>

<div id="codeBox">
  <div class="code-line" id="c1">1: for i in range(n):</div>
  <div class="code-line" id="c2">2: &nbsp;&nbsp;for j in range(i+1, n):</div>
  <div class="code-line" id="c3">3: &nbsp;&nbsp;&nbsp;&nbsp;matrix[i][j], matrix[j][i] = matrix[j][i], matrix[i][j]</div>
  <div class="code-line" id="c4">4: for row in matrix:</div>
  <div class="code-line" id="c5">5: &nbsp;&nbsp;row.reverse()</div>
</div>

<div style="text-align:center;">
  <button onclick="step()">ä¸‹ä¸€æ­¥</button>
  <button onclick="reset()">é‡ç½®</button>
</div>

<div class="description">
  <h3>â± æ™‚é–“èˆ‡ç©ºé–“è¤‡é›œåº¦</h3>
  <table border="1" cellpadding="8" style="margin:auto; border-collapse: collapse;">
    <tr><th>æ–¹æ³•</th><th>æ™‚é–“è¤‡é›œåº¦</th><th>ç©ºé–“è¤‡é›œåº¦</th></tr>
    <tr><td>è½‰ç½® + ç¿»è½‰</td><td>O(nÂ²)</td><td>O(1)</td></tr>
  </table>
</div>

<script>
let matrix = [], stepCount = 0, n = 0;
let i = 0, j = 0, phase = 0;

function start() {
  const raw = document.getElementById("inputMatrix").value.trim().split("\n");
  matrix = raw.map(row => row.split(',').map(Number));
  n = matrix.length;
  i = 0;
  j = i + 1;
  phase = 0;
  stepCount = 0;
  highlight("c1");
  render();
}

function reset() {
  document.getElementById("inputMatrix").value = "1,2,3\n4,5,6\n7,8,9";
  start();
}

function step() {
  if (phase === 0) {
    if (i < n) {
      if (j < n) {
        let temp = matrix[i][j];
        matrix[i][j] = matrix[j][i];
        matrix[j][i] = temp;
        highlight("c3");
        j++;
      } else {
        i++;
        j = i + 1;
      }
    } else {
      phase = 1;
      i = 0;
      highlight("c4");
    }
  } else if (phase === 1) {
    if (i < n) {
      matrix[i].reverse();
      highlight("c5");
      i++;
    }
  }
  render();
}

function highlight(id) {
  document.querySelectorAll(".code-line").forEach(l => l.classList.remove("active-code"));
  if (id) document.getElementById(id).classList.add("active-code");
}

function render() {
  const box = document.getElementById("matrixBox");
  box.innerHTML = "";
  box.style.gridTemplateColumns = `repeat(${n}, 40px)`;

  for (let row of matrix) {
    for (let val of row) {
      const cell = document.createElement("div");
      cell.className = "cell";
      cell.textContent = val;
      box.appendChild(cell);
    }
  }
}
</script>
</body>
</html>
