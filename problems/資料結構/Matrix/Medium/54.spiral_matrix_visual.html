
<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>LeetCode 54 - Spiral Matrix</title>
  <style>
    body { font-family: sans-serif; padding: 2rem; background: #f8f9fa; }
    h1, h2 { color: #2c3e50; }
    pre.code-block {
      background: #2d2d2d; color: #f8f8f2; padding: 1rem;
      border-radius: 8px; font-family: monospace;
      line-height: 1.5; overflow-x: auto;
    }
    .highlight { background: #44475a; display: block; }
    .matrix, .label { display: grid; grid-template-columns: repeat(auto-fit, 50px); gap: 5px; justify-content: start; }
    .cell {
      width: 50px; height: 50px; border: 2px solid #ccc;
      display: flex; align-items: center; justify-content: center;
      background: white; font-size: 18px;
    }
    .cell.active { background: #ffeaa7; border-color: #fdcb6e; }
    .state-box { margin-top: 1rem; font-family: monospace; }
    button { margin-top: 1rem; padding: 0.5rem 1rem; font-size: 16px; }
  </style>
</head>
<body>

<h1>📘 LeetCode 54 - Spiral Matrix</h1>

<h2>📌 題目描述</h2>
<p>給定一個 m x n 的矩陣，請以螺旋順序回傳其中所有的元素。</p>

<h2>🔍 範例</h2>
<pre><code>Input: [[1,2,3],[4,5,6],[7,8,9]]
Output: [1,2,3,6,9,8,7,4,5]</code></pre>

<h2>🧠 解題思路</h2>
<ul>
  <li>定義四個邊界：top, bottom, left, right</li>
  <li>依序走：→ ↓ ← ↑，每完成一圈就收縮邊界</li>
</ul>

<h2>💡 Python 程式碼</h2>
<pre class="code-block">
<span id="line1">class Solution:</span>
<span id="line2">    def spiralOrder(self, matrix):</span>
<span id="line3">        top, bottom = 0, len(matrix) - 1</span>
<span id="line4">        left, right = 0, len(matrix[0]) - 1</span>
<span id="line5">        result = []</span>
<span id="line6">        while top <= bottom and left <= right:</span>
<span id="line7">            for i in range(left, right + 1):</span>
<span id="line8">                result.append(matrix[top][i])</span>
<span id="line9">            top += 1</span>
<span id="line10">            for i in range(top, bottom + 1):</span>
<span id="line11">                result.append(matrix[i][right])</span>
<span id="line12">            right -= 1</span>
<span id="line13">            if top <= bottom:</span>
<span id="line14">                for i in range(right, left - 1, -1):</span>
<span id="line15">                    result.append(matrix[bottom][i])</span>
<span id="line16">                bottom -= 1</span>
<span id="line17">            if left <= right:</span>
<span id="line18">                for i in range(bottom, top - 1, -1):</span>
<span id="line19">                    result.append(matrix[i][left])</span>
<span id="line20">                left += 1</span>
<span id="line21">        return result</span>
</pre>

<h2>⏱️ 時間與空間複雜度</h2>
<ul>
  <li>時間複雜度：<strong>O(m × n)</strong></li>
  <li>空間複雜度：<strong>O(m × n)</strong></li>
</ul>

<h2>📊 視覺化模擬（快慢指針）</h2>
<div class="matrix" id="matrixGrid"></div>
<div class="state-box" id="state">結果：[]</div>
<button onclick="step()">下一步</button>
<button onclick="reset()">重置</button>

<script>
const matrix = [[1,2,3],[4,5,6],[7,8,9]];
const m = matrix.length, n = matrix[0].length;
let top = 0, bottom = m - 1, left = 0, right = n - 1;
let state = 0, i = 0;
let result = [], flat = [], cells = [];

function buildGrid() {
  const container = document.getElementById("matrixGrid");
  container.style.gridTemplateColumns = `repeat(${n}, 50px)`;
  container.innerHTML = "";
  flat = matrix.flat();
  cells = flat.map((val, idx) => {
    const div = document.createElement("div");
    div.className = "cell";
    div.textContent = val;
    container.appendChild(div);
    return div;
  });
}

function getIndex(row, col) {
  return row * n + col;
}

function highlightCell(row, col) {
  const idx = getIndex(row, col);
  cells[idx].classList.add("active");
  result.push(matrix[row][col]);
  document.getElementById("state").textContent = "結果：" + JSON.stringify(result);
}

function step() {
  if (state === 0) {
    if (i <= right) {
      highlightCell(top, i++);
      return;
    }
    top++; i = top; state = 1;
    step(); return;
  }
  if (state === 1) {
    if (i <= bottom) {
      highlightCell(i++, right);
      return;
    }
    right--; i = right; state = 2;
    step(); return;
  }
  if (state === 2) {
    if (top <= bottom && i >= left) {
      highlightCell(bottom, i--);
      return;
    }
    bottom--; i = bottom; state = 3;
    step(); return;
  }
  if (state === 3) {
    if (left <= right && i >= top) {
      highlightCell(i--, left);
      return;
    }
    left++; i = left; state = 0;
    step(); return;
  }
}

function reset() {
  top = 0; bottom = m - 1; left = 0; right = n - 1;
  state = 0; i = 0; result = [];
  document.getElementById("state").textContent = "結果：[]";
  buildGrid();
}
window.onload = reset;
</script>

</body>
</html>
