
<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>LeetCode 79 - Word Search è¦–è¦ºåŒ–ï¼ˆé€æ­¥ç‰ˆï¼‰</title>
  <style>
    body { font-family: sans-serif; background: #f4f4f4; padding: 2rem; }
    h1 { text-align: center; }
    .section { max-width: 800px; margin: 1rem auto; background: white; padding: 1rem; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
    table { border-collapse: collapse; margin: auto; }
    td {
      width: 40px; height: 40px; text-align: center;
      border: 1px solid #ccc; font-size: 18px; font-weight: bold;
    }
    .active { background-color: #2ecc71 !important; color: white; }
    .visited { background-color: #3498db; color: white; }
    .backtrack { background-color: #e74c3c; color: white; }
    .final { background-color: gold; color: black; font-weight: bold; }
    button { background: #007acc; color: white; padding: 10px 16px; border: none; border-radius: 6px; cursor: pointer; margin: 0.5rem; }
    #logBox { max-height: 200px; overflow-y: auto; background: #f9f9f9; padding: 1rem; border: 1px solid #ddd; font-family: monospace; }
  </style>
</head>
<body>

<h1>LeetCode 79 - Word Search é€æ­¥æ¨¡æ“¬</h1>


<div class="section">
  <h2>ğŸ“˜ é¡Œç›®æè¿°</h2>
  <p>çµ¦å®šä¸€å€‹ <code>m x n</code> çš„å­—æ¯çŸ©é™£ <code>board</code> å’Œä¸€å€‹å–®å­— <code>word</code>ï¼Œè«‹åˆ¤æ–·è©²å–®å­—æ˜¯å¦å­˜åœ¨æ–¼çŸ©é™£ä¸­ã€‚</p>
  <p>å–®å­—å¿…é ˆé€éã€Œç›¸é„°ã€çš„æ ¼å­é€å­—é€£æ¥ï¼ˆåªèƒ½ä¸Šä¸‹å·¦å³ï¼‰ï¼Œæ¯æ ¼åªèƒ½ç”¨ä¸€æ¬¡ã€‚</p>
</div>

<div class="section">
  <h2>ğŸ§  è§£é¡Œæ€è·¯ï¼šDFS + å›æº¯</h2>
  <ul>
    <li>å¾æ¯å€‹å¯èƒ½èµ·é»å‡ºç™¼ï¼ˆåŒ¹é… word[0]ï¼‰</li>
    <li>æ¯ä¸€æ­¥æ¯”å°ç›®å‰å­—æ¯ï¼Œæ¥è‘—å¾€å››å€‹æ–¹å‘éè¿´</li>
    <li>ç‚ºé¿å…é‡è¤‡èµ°è¨ªï¼Œç”¨ <code>visited</code> é™£åˆ—è¨˜éŒ„</li>
    <li>æ‰¾åˆ°å®Œæ•´å­—ä¸²å°±çµæŸ</li>
  </ul>
</div>

<div class="section">
  <h2>ğŸ“Œ Tips</h2>
  <ul>
    <li>å¯ç”¨ stack æ¨¡æ“¬ DFSï¼Œé¿å…ç›´æ¥ä½¿ç”¨éè¿´</li>
    <li>è¨˜å¾—æ¯æ¬¡èµ°è¨ªçµæŸå¾Œéœ€é‚„åŸç¾å ´ï¼ˆå›æº¯ï¼‰</li>
    <li>å¯ä»¥å°‡æ¯ä¸€å€‹ç‹€æ…‹ log å‡ºä¾†å”åŠ©é™¤éŒ¯</li>
  </ul>
</div>

<div class="section">
  <h2>ğŸ’» é—œéµç¨‹å¼é‚è¼¯</h2>
  <pre style="background:#272822;color:#f8f8f2;padding:1rem;border-radius:6px;">
<span style="color:#66d9ef">if</span> board[i][j] == word[0]:
    dfs(i, j, 0)

<span style="color:#66d9ef">def</span> dfs(x, y, idx):
    <span style="color:#66d9ef">if</span> idx == len(word): <span style="color:#f92672">return</span> True
    <span style="color:#66d9ef">if</span> x < 0 or y < 0 or x >= m or y >= n or visited[x][y] or board[x][y] != word[idx]:
        <span style="color:#f92672">return</span> False
    visited[x][y] = True
    result = dfs in 4 directions
    visited[x][y] = False
    <span style="color:#f92672">return</span> result
  </pre>
</div>

<div class="section">
  <h2>â± æ™‚é–“èˆ‡ç©ºé–“è¤‡é›œåº¦</h2>
  <table border="1" cellpadding="8" style="border-collapse: collapse; width: 100%;">
    <tr><th>æ–¹æ³•</th><th>æ™‚é–“è¤‡é›œåº¦</th><th>ç©ºé–“è¤‡é›œåº¦</th></tr>
    <tr><td>DFS + å›æº¯</td><td>O(m Ã— n Ã— 4<sup>L</sup>)</td><td>O(L)</td></tr>
  </table>
</div>
<div class="section">
  <table id="grid"></table>
  <div style="text-align:center;">
    <button onclick="start()">é–‹å§‹æ¨¡æ“¬</button>
    <button onclick="step()">ä¸‹ä¸€æ­¥</button>
    <button onclick="reset()">é‡ç½®</button>
  </div>
  <p style="text-align:center;">ğŸ”  å–®å­—ï¼š<strong id="wordDisplay">ABCCED</strong></p>
</div>

<div class="section">
  <h3>ğŸ“œ æ—¥èªŒ Log</h3>
  <div id="logBox"></div>
</div>

<script>
let originalBoard = [
  ["A","B","C","E"],
  ["S","F","C","S"],
  ["A","D","E","E"]
];
let board, word = "ABCCED", stack = [], visited, path = [], found = false;

function drawBoard() {
  const table = document.getElementById("grid");
  table.innerHTML = "";
  for (let i = 0; i < board.length; i++) {
    const row = document.createElement("tr");
    for (let j = 0; j < board[0].length; j++) {
      const cell = document.createElement("td");
      cell.id = `cell-${i}-${j}`;
      cell.textContent = board[i][j];
      row.appendChild(cell);
    }
    table.appendChild(row);
  }
}

function log(msg) {
  const logBox = document.getElementById("logBox");
  const p = document.createElement("div");
  p.textContent = msg;
  logBox.appendChild(p);
  logBox.scrollTop = logBox.scrollHeight;
}

function reset() {
  board = originalBoard.map(row => row.slice());
  drawBoard();
  document.getElementById("logBox").innerHTML = "";
  stack = [];
  visited = board.map(row => row.map(() => false));
  path = [];
  found = false;
}

function start() {
  reset();
  outer:
    for (let i = 0; i < board.length; i++) {
      for (let j = 0; j < board[0].length; j++) {
        if (board[i][j] === word[0]) {
          stack.push({ x: i, y: j, idx: 0, prev: null });
          break outer;
      }
    }
  }
  log("ğŸ“Œ åˆå§‹åŒ–å®Œæˆï¼Œè«‹é»ã€ä¸‹ä¸€æ­¥ã€é€æ­¥æ¨¡æ“¬");
}

function step() {
  if (!stack.length || found) return;
  const { x, y, idx, prev } = stack.pop();

  if (x < 0 || x >= board.length || y < 0 || y >= board[0].length || visited[x][y] || board[x][y] !== word[idx]) {
    log(`âŒ (${x},${y}) ä¸ç¬¦åˆ '${word[idx] || "-"}' æˆ–å·²è¨ªå•`);
    return;
  }

  path.push({ x, y, idx, prev });
  visited[x][y] = true;
  document.querySelectorAll("td").forEach(td => td.classList.remove("active"));
  document.getElementById(`cell-${x}-${y}`).classList.add("active");
  log(`âœ… åŒ¹é… '${word[idx]}' at (${x},${y})`);

  if (idx === word.length - 1) {
    found = true;
    log("ğŸ‰ æˆåŠŸæ‰¾åˆ°å–®å­—ï¼");
    path.forEach(({ x, y }) => {
      const td = document.getElementById(`cell-${x}-${y}`);
      td.classList.remove("active");
      td.classList.add("final");
    });
    return;
  }

  const directions = [
    { dx: 1, dy: 0 },
    { dx: -1, dy: 0 },
    { dx: 0, dy: 1 },
    { dx: 0, dy: -1 }
  ];

  for (const { dx, dy } of directions) {
    stack.push({ x: x + dx, y: y + dy, idx: idx + 1, prev: { x, y } });
  }
}
window.onload = reset;
</script>
</body>
</html>
