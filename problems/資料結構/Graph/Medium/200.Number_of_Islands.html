<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>200. Number of Islands - DFS æ¨¡æ“¬å™¨</title>
  <style>
    body { font-family: 'Segoe UI', sans-serif; padding: 2rem; background: #f9f9f9; }
    h2, h3 { color: #007acc; }
    .container {
      background: #fff; padding: 2rem; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.08);
      max-width: 1000px; margin: auto;
    }
    table { border-collapse: collapse; margin: 1rem auto; }
    td {
      width: 40px; height: 40px; text-align: center; vertical-align: middle;
      border: 1px solid #ccc; font-size: 16px;
    }
    .land { background-color: #4CAF50; color: white; }
    .water { background-color: #90caf9; color: white; }
    .visited { background-color: orange !important; }
    .active-cell { outline: 3px solid red; font-weight: bold; }
    .matrix-col { text-align: center; }
    .status-box {
      margin-top: 1rem; padding: 1rem;
      background: #eef5ff; border-left: 5px solid #007acc;
      font-family: monospace; white-space: pre-wrap;
    }
    button {
      padding: 8px 16px; font-size: 14px; margin: 0.5rem 0.5rem 0 0;
      border: none; border-radius: 4px; background-color: #007acc; color: white;
      cursor: pointer;
    }
    input { width: 300px; padding: 6px; }
    #codeBox {
      background: #272822; color: #f8f8f2; padding: 1rem;
      border-radius: 6px; margin-top: 2rem;
      font-family: monospace; white-space: pre-wrap;
    }
  </style>
</head>
<body>
<div class="container">
  <h2>ğŸï¸ 200. Number of Islands - DFS è¦–è¦ºåŒ–æ¨¡æ“¬</h2>

  <h3>ğŸ“˜ é¡Œç›®æè¿°</h3>
  <p>
    çµ¦å®šä¸€å€‹ç”± '1'ï¼ˆé™¸åœ°ï¼‰å’Œ '0'ï¼ˆæ°´ï¼‰çµ„æˆçš„ m x n äºŒç¶­ç¶²æ ¼ï¼Œè«‹ä½ è¨ˆç®—ç¶²æ ¼ä¸­å³¶å¶¼çš„æ•¸é‡ã€‚
    ä¸€å€‹å³¶å¶¼ç”±ç›¸é„°çš„é™¸åœ°å–®å…ƒæ ¼æ°´å¹³æˆ–å‚ç›´é€£æ¥çµ„æˆã€‚ä½ å¯ä»¥å‡è¨­ç¶²æ ¼çš„å››å€‹é‚Šå‡è¢«æ°´åŒ…åœã€‚
  </p>

  <h3>ğŸ“ˆ æ™‚é–“èˆ‡ç©ºé–“è¤‡é›œåº¦</h3>
  <ul>
    <li>æ™‚é–“è¤‡é›œåº¦ï¼šO(m Ã— n)ï¼Œå…¶ä¸­ m æ˜¯åˆ—æ•¸ï¼Œn æ˜¯è¡Œæ•¸ã€‚æ¯å€‹æ ¼å­æœ€å¤šåªæœƒè¢«è¨ªå•ä¸€æ¬¡ã€‚</li>
    <li>ç©ºé–“è¤‡é›œåº¦ï¼šO(m Ã— n)ï¼Œvisited é™£åˆ—å’Œ DFS éè¿´å †ç–Šæœ€å¤šæœƒå­˜å„² m Ã— n å€‹æ ¼å­ã€‚</li>
  </ul>

  <h3>ğŸ§ª è¼¸å…¥</h3>
  <input type="text" id="gridInput" value='[["1","1","0","0","0"],["1","1","0","0","0"],["0","0","1","0","0"],["0","0","0","1","1"]]'>
  <button onclick="init()">ğŸ”ƒ é‡è¨­</button>
  <button onclick="step()">ğŸ§­ ä¸‹ä¸€æ­¥</button>
  <p id="stepInfo"></p>
  <div class="matrix-col">
    <h3>ğŸŒ åœ°åœ–ç‹€æ…‹</h3>
    <div id="grid"></div>
  </div>
  <div class="status-box" id="debugBox"></div>
  <h3>ğŸ“„ DFS æ¼”ç®—æ³•ç¨‹å¼ç¢¼</h3>
  <div id="codeBox"></div>
</div>

<script>
let grid = [], m = 0, n = 0;
let visited = [], dfsStack = [], islandCount = 0;
let currentIsland = 0;

function renderGrid(active = null) {
  const div = document.getElementById("grid");
  div.innerHTML = "<table>" +
    grid.map((row, r) => "<tr>" +
      row.map((cell, c) => {
        let cls = cell === "1" ? "land" : "water";
        if (visited[r][c]) cls = "visited";
        if (active && active[0] === r && active[1] === c) cls += " active-cell";
        return `<td class="${cls}">${cell}</td>`;
      }).join('') + "</tr>")
    .join('') + "</table>";
}

function log(msg) {
  const box = document.getElementById("debugBox");
  box.innerText += msg + "\n";
  box.scrollTop = box.scrollHeight;
}

function init() {
  grid = JSON.parse(document.getElementById("gridInput").value);
  m = grid.length;
  n = grid[0].length;
  visited = Array.from({ length: m }, () => Array(n).fill(false));
  dfsStack = [];
  islandCount = 0;
  currentIsland = 0;
  step();
}

function step() {
  while (dfsStack.length === 0) {
    let found = false;
    for (let r = 0; r < m; r++) {
      for (let c = 0; c < n; c++) {
        if (grid[r][c] === "1" && !visited[r][c]) {
          dfsStack.push([r, c]);
          currentIsland++;
          islandCount++;
          log(`ğŸŒ´ ç™¼ç¾ç¬¬ ${currentIsland} å€‹å³¶å¶¼ï¼Œèµ·é» (${r}, ${c})`);
          document.getElementById("stepInfo").innerText = `æ¢ç´¢ç¬¬ ${currentIsland} åº§å³¶å¶¼...`;
          renderGrid([r, c]);
          found = true;
          break;
        }
      }
      if (found) break;
    }
    if (!found) {
      document.getElementById("stepInfo").innerText = `âœ… æ¨¡æ“¬çµæŸï¼Œå…±æ‰¾åˆ° ${islandCount} åº§å³¶å¶¼ã€‚`;
      return;
    }
  }

  const [r, c] = dfsStack.pop();
  if (r < 0 || c < 0 || r >= m || c >= n || visited[r][c] || grid[r][c] === "0") {
    return step();
  }
  visited[r][c] = true;
  const directions = [
    [r + 1, c], [r - 1, c],
    [r, c + 1], [r, c - 1]
  ];
  for (const [nr, nc] of directions) {
    dfsStack.push([nr, nc]);
  }
  renderGrid([r, c]);
  document.getElementById("stepInfo").innerText = `ğŸ” æ¢ç´¢ (${r}, ${c}) | å³¶å¶¼æ•¸: ${islandCount}`;
  log(`âœ… æ¢ç´¢ (${r}, ${c})`);
}

const dfsCode = `class Solution:
    def dfs(self, grid, row, col):
        # ä¸Šä¸‹å·¦å³
        grid[row][col] = '#'  # æ¨™è¨˜ç‚ºå·²è¨ªå•
        lst = [(row - 1, col), (row + 1, col), (row, col - 1), (row, col + 1)]
        for r, c in lst:
            if(0 <= r < len(grid) and 0 <= c < len(grid[0]) and grid[r][c] == '1'):
                self.dfs(grid, r, c)

    def numIslands(self, grid: List[List[str]]) -> int:
        count = 0
        row, column = len(grid), len(grid[0])
        for r in range(row):
            for c in range(column):
                if(grid[r][c] == '1'):
                    self.dfs(grid, r, c)
                    count += 1
        return count`;

document.getElementById("codeBox").innerText = dfsCode;
</script>
</body>
</html>
