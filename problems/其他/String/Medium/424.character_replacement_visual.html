
<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>LeetCode 424 - Longest Repeating Character Replacement</title>
  <style>
    body { font-family: sans-serif; background: #f9f9f9; padding: 2rem; }
    h1, h2 { color: #2c3e50; }
    pre.code-block { background: #2d2d2d; color: #f8f8f2; padding: 1rem; border-radius: 8px; font-family: monospace; line-height: 1.5; overflow-x: auto; }
    .highlight { background: #44475a; display: block; }
    .window-row, .pointer-row { display: flex; justify-content: center; font-family: monospace; margin: 10px 0; }
    .cell {
      width: 40px; height: 40px; border: 2px solid #ccc;
      display: flex; align-items: center; justify-content: center;
      margin: 2px; font-size: 20px;
    }
    .char { background: white; }
    .char.left { background-color: #d5f5e3; border-color: #27ae60; }
    .char.right { background-color: #f9e0e0; border-color: #e74c3c; }
    .label {
      font-size: 12px;
      text-align: center;
      width: 40px;
    }
    .state-box {
      text-align: center;
      margin: 1rem 0;
      font-family: monospace;
      font-size: 16px;
    }
    button { margin: 0.5rem; padding: 0.5rem 1rem; font-size: 16px; }
  </style>
</head>
<body>

<h1>ğŸ“˜ LeetCode 424 - Longest Repeating Character Replacement</h1>

<h2>ğŸ”¹ é¡Œç›®èªªæ˜</h2>
<p>çµ¦å®šå­—ä¸² s å’Œæ•´æ•¸ kï¼Œæ¯æ¬¡å¯ä»¥å°‡ä¸€å€‹å­—æ¯æ›æˆä»»æ„å¤§å¯«è‹±æ–‡å­—æ¯ï¼Œæœ€å¤šæ› k æ¬¡ï¼Œæ‰¾å‡ºå¯ä»¥å¾—åˆ°çš„æœ€é•·çš„ç›¸åŒå­—æ¯å­å­—ä¸²ã€‚</p>

<h2>ğŸ§  è§£é¡Œæ€è·¯</h2>
<ul>
  <li>ä½¿ç”¨æ»‘å‹•çª—å£æŠ€å·§ï¼Œè¨˜éŒ„ç•¶å‰å€é–“å…§æ¯å€‹å­—æ¯çš„å‡ºç¾æ¬¡æ•¸ countã€‚</li>
  <li>ç¶­æŒçª—å£æœ€å¤§é »ç‡ maxfï¼Œä»£è¡¨ä¸ç”¨ä¿®æ”¹å°±èƒ½ä¿ç•™çš„æœ€å¤šç›¸åŒå­—æ¯æ•¸ã€‚</li>
  <li>ç•¶ (right - left + 1) - maxf > kï¼Œä»£è¡¨ä¸èƒ½è½‰æ›æˆåŠŸï¼Œéœ€å·¦æŒ‡é‡å‰é€²ã€‚</li>
  <li>æ¯ä¸€æ­¥æ›´æ–°ç•¶å‰æœ€å¤§ç­”æ¡ˆ res = max(res, right - left + 1)</li>
</ul>

<h2>ğŸ’¡ Python ç¨‹å¼ç¢¼</h2>
<pre class="code-block" id="code">
<span id="line1">class Solution:</span>
<span id="line2">    def characterReplacement(self, s: str, k: int) -> int:</span>
<span id="line3">        count = {}</span>
<span id="line4">        res = 0</span>
<span id="line5">        left = 0</span>
<span id="line6">        maxf = 0</span>
<span id="line7">        for right in range(len(s)):</span>
<span id="line8">            count[s[right]] = 1 + count.get(s[right], 0)</span>
<span id="line9">            maxf = max(maxf, count[s[right]])</span>
<span id="line10">            while (right - left + 1) - maxf > k:</span>
<span id="line11">                count[s[left]] -= 1</span>
<span id="line12">                left += 1</span>
<span id="line13">            res = max(res, right - left + 1)</span>
<span id="line14">        return res</span>
</pre>

<h2>ğŸ¥ Sliding Window è¦–è¦ºåŒ–</h2>
<div class="window-row" id="windowRow"></div>
<div class="pointer-row" id="pointerRow"></div>
<div class="state-box">res: <span id="resVal">0</span> | 
  maxf: <span id="maxFreq">0</span> | count: <span id="countState">{}</span>
</div>
<p style="text-align:center;">
  <button onclick="step()">ä¸‹ä¸€æ­¥</button>
  <button onclick="reset()">é‡ç½®</button>
</p>
<p style="text-align:center;">ğŸ“ æœ€å¤§é•·åº¦: <span id="maxLen">0</span></p>

<script>
const str = "AABABBA";
const k = 1;
let left = 0, right = 0, maxf = 0, res = 0;
  document.getElementById("resVal").textContent = res;
let count = {};
let finished = false;

function renderWindow() {
  const win = document.getElementById("windowRow");
  const ptr = document.getElementById("pointerRow");
  const maxLen = document.getElementById("maxLen");
  const maxFreq = document.getElementById("maxFreq");
  const countState = document.getElementById("countState");

  win.innerHTML = "";
  ptr.innerHTML = "";

  for (let i = 0; i < str.length; i++) {
    const cell = document.createElement("div");
    cell.className = "cell char";
    if (i === left) cell.classList.add("left");
    if (i === right) cell.classList.add("right");
    cell.textContent = str[i];
    win.appendChild(cell);

    const label = document.createElement("div");
    label.className = "label";
    if (i === left && i === right) label.innerHTML = "L/R";
    else if (i === left) label.innerHTML = "L";
    else if (i === right) label.innerHTML = "R";
    else label.innerHTML = "&nbsp;";
    ptr.appendChild(label);
  }

  maxLen.textContent = res;
  maxFreq.textContent = maxf;
  countState.textContent = JSON.stringify(count);
}

function highlight(lineNum) {
  for (let i = 1; i <= 14; i++) {
    document.getElementById("line" + i).classList.remove("highlight");
  }
  if (lineNum) document.getElementById("line" + lineNum).classList.add("highlight");
}

function step() {
  if (right >= str.length || finished) return;

  highlight(8);
  count[str[right]] = 1 + (count[str[right]] || 0);

  highlight(9);
  maxf = Math.max(maxf, count[str[right]]);

  highlight(10);
  if ((right - left + 1) - maxf > k) {
    highlight(11);
    count[str[left]] -= 1;
    highlight(12);
    left += 1;
  }

  highlight(13);
  res = Math.max(res, right - left + 1);
  document.getElementById("resVal").textContent = res;

  right++;
  if (right >= str.length) finished = true;

  renderWindow();
}

function reset() {
  left = 0; right = 0; maxf = 0; res = 0;
  document.getElementById("resVal").textContent = res; count = {}; finished = false;
  highlight(null);
  renderWindow();
}

window.onload = renderWindow;
</script>

</body>
</html>
