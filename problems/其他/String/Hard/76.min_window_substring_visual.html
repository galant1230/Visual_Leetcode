
<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>LeetCode 76 - Minimum Window Substring</title>
  <style>
    body { font-family: sans-serif; padding: 2rem; background: #f4f4f4; }
    h1, h2 { color: #2c3e50; }
    pre.code-block { background: #2d2d2d; color: #f8f8f2; padding: 1rem; border-radius: 8px; font-family: monospace; line-height: 1.5; overflow-x: auto; }
    .highlight { background: #44475a; display: block; }
    .window-row, .pointer-row { display: flex; justify-content: center; font-family: monospace; margin: 10px 0; }
    .cell {
      width: 40px; height: 40px; border: 2px solid #ccc;
      display: flex; align-items: center; justify-content: center;
      margin: 2px; font-size: 20px; background: white;
    }
    .cell.left { background: #d5f5e3; border-color: #27ae60; }
    .cell.right { background: #f9e0e0; border-color: #e74c3c; }
    .label { font-size: 12px; text-align: center; width: 40px; }
    .state-box {
      text-align: center;
      margin: 1rem 0;
      font-family: monospace;
      font-size: 16px;
    }
    button { margin: 0.5rem; padding: 0.5rem 1rem; font-size: 16px; }
  </style>
</head>
<body>

<h1>ğŸ“˜ LeetCode 76 - Minimum Window Substring</h1>

<h2>ğŸ” é¡Œç›®èªªæ˜</h2>
<p>çµ¦å®šå­—ä¸² <code>s</code> å’Œ <code>t</code>ï¼Œæ‰¾å‡º s ä¸­æœ€çŸ­å­å­—ä¸²ä½¿å¾—å…¶ä¸­åŒ…å« t ä¸­æ‰€æœ‰å­—æ¯ï¼ˆé †åºä¸é™ã€å¯é‡è¤‡ï¼‰ã€‚</p>
<h3>ğŸ“˜ ç¯„ä¾‹</h3>
<pre><code>Input:  s = "ADOBECODEBANC", t = "ABC"
Output: "BANC"</code></pre>
<p>çµ¦å®šå­—ä¸² <code>s</code> å’Œ <code>t</code>ï¼Œæ‰¾å‡º s ä¸­æœ€çŸ­å­å­—ä¸²ä½¿å¾—å…¶ä¸­åŒ…å« t ä¸­æ‰€æœ‰å­—æ¯ï¼ˆé †åºä¸é™ã€å¯é‡è¤‡ï¼‰ã€‚</p>

<h2>ğŸ§  è§£æ³•æ€è·¯</h2>
<ul>
  <li>ä½¿ç”¨æ»‘å‹•çª—å£ (sliding window)</li>
  <li>å³æŒ‡é‡æ“´å±•å­—ä¸²ç›´åˆ°åŒ…å«æ‰€æœ‰ç›®æ¨™å­—æ¯</li>
  <li>å·¦æŒ‡é‡ç¸®å°å­—ä¸²ä»¥æ±‚æœ€çŸ­ç­”æ¡ˆ</li>
</ul>

<h2>â±ï¸ æ™‚é–“èˆ‡ç©ºé–“è¤‡é›œåº¦</h2>
<ul>
  <li><strong>æ™‚é–“è¤‡é›œåº¦ï¼š</strong>O(m + n)</li>
  <li><strong>ç©ºé–“è¤‡é›œåº¦ï¼š</strong>O(n)</li>
</ul>

<h2>ğŸ’¡ Python ç¨‹å¼ç¢¼</h2>
<pre class="code-block" id="code">
<span id="line1">import collections</span>
<span id="line2">class Solution:</span>
<span id="line3">    def minWindow(self, s, t):</span>
<span id="line4">        freq = dict(collections.Counter(t))</span>
<span id="line5">        count = 0</span>
<span id="line6">        slow = 0</span>
<span id="line7">        min_str = ""</span>
<span id="line8">        min_len = float("inf")</span>
<span id="line9">        for fast in range(len(s)):</span>
<span id="line10">            c = s[fast]</span>
<span id="line11">            if c in freq:</span>
<span id="line12">                freq[c] -= 1</span>
<span id="line13">                if freq[c] == 0:</span>
<span id="line14">                    count += 1</span>
<span id="line15">            while all(v <= 0 for v in freq.values()) and slow <= fast:</span>
<span id="line16">                if (fast - slow + 1) < min_len:</span>
<span id="line17">                    min_len = fast - slow + 1</span>
<span id="line18">                    min_str = s[slow:fast+1]</span>
<span id="line19">                left_c = s[slow]</span>
<span id="line20">                slow += 1</span>
<span id="line21">                if left_c in freq:</span>
<span id="line22">                    freq[left_c] += 1</span>
<span id="line23">                    if freq[left_c] > 0:</span>
<span id="line24">                        count -= 1</span>
<span id="line25">        return min_str</span>
</pre>

<h2>ğŸ¥ Sliding Window è¦–è¦ºåŒ–</h2>
<div class="window-row" id="windowRow"></div>
<div class="pointer-row" id="pointerRow"></div>

<h2>ğŸ“Š æ­¥é©Ÿè©³è§£</h2>
<table border="1" cellspacing="0" cellpadding="6">
<thead>
<tr>
  <th>Fast æŒ‡é‡ä½ç½®</th>
  <th>ç•¶å‰å­å­—ä¸²</th>
  <th>freq</th>
  <th>min_str</th>
  <th>èªªæ˜</th>
</tr>
</thead>
<tbody id="historyLog"></tbody>
</table>

<div class="state-box">min_str: <span id="minStr">""</span></div>

<h2>ğŸ“Š æ­¥é©Ÿè©³è§£</h2>
<table border="1" cellspacing="0" cellpadding="6">
<thead>
<tr>
  <th>Fast æŒ‡é‡ä½ç½®</th>
  <th>ç•¶å‰å­å­—ä¸²</th>
  <th>freq</th>
  <th>min_str</th>
  <th>èªªæ˜</th>
</tr>
</thead>
<tbody id="historyLog"></tbody>
</table>

<div class="state-box">
  freq: <span id="freqMap"></span>
</div>
<p style="text-align:center;">
  <button onclick="step()">ä¸‹ä¸€æ­¥</button>
  <button onclick="reset()">é‡ç½®</button>
</p>

<script>
const s = "ADOBECODEBANC";
const t = "ABC";
let slow = 0, fast = 0;
let result = "";
  document.getElementById("minStr").textContent = "";
let freq = {};
let history = [];
let paused = false;

function buildFreq() {
  freq = {};
  for (const c of t) freq[c] = (freq[c] || 0) + 1;
}

function highlight(line) {
  for (let i = 1; i <= 25; i++) {
    document.getElementById("line" + i).classList.remove("highlight");
  }
  if (line) document.getElementById("line" + line).classList.add("highlight");
}

function render() {
  const row = document.getElementById("windowRow");
  const label = document.getElementById("pointerRow");
  const freqDiv = document.getElementById("freqMap");
  row.innerHTML = "";
  label.innerHTML = "";
  for (let i = 0; i < s.length; i++) {
    const cell = document.createElement("div");
    cell.className = "cell";
    if (i === slow) cell.classList.add("left");
    if (i === fast) cell.classList.add("right");
    cell.textContent = s[i];
    row.appendChild(cell);
    const l = document.createElement("div");
    l.className = "label";
    if (i === slow && i === fast) l.innerHTML = "L/R";
    else if (i === slow) l.innerHTML = "L";
    else if (i === fast) l.innerHTML = "R";
    else l.innerHTML = "&nbsp;";
    label.appendChild(l);
  }
  freqDiv.textContent = JSON.stringify(freq);
}



function step() {
  if (fast >= s.length) return;

  highlight(10);
  let c = s[fast];
  if (c in freq) {
    highlight(12);
    freq[c] -= 1;
    highlight(13);
    highlight(14);
  }

  // å…ˆè¨˜éŒ„ç•¶å‰æ­¥é©Ÿï¼ˆç„¡è«–æ˜¯å¦å·²ç¬¦åˆæ¢ä»¶ï¼‰
  logStep("â© å°šæœªæª¢æŸ¥æ˜¯å¦æ»¿è¶³æ¢ä»¶");

  highlight(15);
  while (Object.keys(freq).every(k => freq[k] <= 0) && slow <= fast) {
    highlight(16);
    const len = fast - slow + 1;
    if (result === "" || len < result.length) {
      highlight(17);
      result = s.slice(slow, fast + 1);
      document.getElementById("minStr").textContent = result;
      highlight(18);
    }
    let left_c = s[slow];
    highlight(19);
    slow++;
    highlight(20);
    if (left_c in freq) {
      highlight(21);
      freq[left_c] += 1;
      highlight(22);
    }

    logStep("âœ… ç¬¦åˆæ¢ä»¶ï¼Œå˜—è©¦æ›´æ–° min_str");
  }

  fast++;
  render();
}


function reset() {
  slow = 0;
  fast = 0;
  result = "";
  document.getElementById("minStr").textContent = "";
  buildFreq();
  highlight(null);
  render();
}
 {
  slow = 0;
  fast = 0;
  result = "";
  document.getElementById("minStr").textContent = "";
  buildFreq();
  highlight(null);
  render();
}
 {
  slow = 0;
  fast = 0;
  result = "";
  document.getElementById("minStr").textContent = "";
  buildFreq();
  highlight(null);
  
    logStep(allOK ? "âœ… ç¬¦åˆæ¢ä»¶ï¼Œå˜—è©¦æ›´æ–° min_str" : "â© é‚„ä¸æ»¿è¶³æ‰€æœ‰å­—å…ƒ");

    render();
}

window.onload = reset;

function logStep(note) {
  const table = document.getElementById("historyLog");
  const row = document.createElement("tr");

  const fastPos = document.createElement("td");
  fastPos.textContent = `Fast = ${s[fast-1]}`;

  const windowStr = document.createElement("td");
  windowStr.textContent = s.slice(slow, fast);

  const freqCol = document.createElement("td");
  freqCol.textContent = JSON.stringify(freq);

  const minStrCol = document.createElement("td");
  minStrCol.textContent = result;

  const noteCol = document.createElement("td");
  noteCol.textContent = note || "";

  row.appendChild(fastPos);
  row.appendChild(windowStr);
  row.appendChild(freqCol);
  row.appendChild(minStrCol);
  row.appendChild(noteCol);
  table.appendChild(row);
}

</script>

</body>
</html>
