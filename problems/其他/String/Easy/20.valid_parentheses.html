<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>LeetCode 20 - Valid Parentheses è¦–è¦ºåŒ–æ•™å­¸</title>
  <style>
    body { font-family: sans-serif; background: #f5f7fa; padding: 2rem; }
    h1 { text-align: center; color: #007acc; }
    .section {
      max-width: 900px;
      margin: 1rem auto;
      background: white;
      padding: 1.5rem 2rem;
      border-radius: 10px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    pre {
      background: #272822;
      color: #f8f8f2;
      padding: 1rem;
      border-radius: 6px;
      overflow-x: auto;
      font-family: monospace;
    }
    .code-line { padding: 2px 0; }
    .active-code { background: #444; color: white; }
    .tips {
      background: #fef7dc;
      padding: 1rem;
      border-left: 6px solid #f1c40f;
      border-radius: 6px;
      margin-top: 1rem;
    }
    table { width: 100%; border-collapse: collapse; margin-top: 1rem; }
    th, td { border: 1px solid #ccc; padding: 0.75rem; text-align: center; }
    .stack-container {
      margin-top: 1rem;
      border: 1px solid #ccc;
      padding: 1rem;
      min-height: 50px;
      background: #ecf0f1;
      border-radius: 6px;
    }
    .stack-item {
      background: #2ecc71;
      color: white;
      padding: 4px 8px;
      margin: 4px 0;
      border-radius: 4px;
      text-align: center;
      font-weight: bold;
    }
    .btn-group { text-align: center; margin-top: 1rem; }
    button {
      background: #007acc;
      color: white;
      padding: 10px 16px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      margin: 0.5rem;
    }
  </style>
</head>
<body>

<h1>LeetCode 20 - Valid Parentheses è¦–è¦ºåŒ–æ•™å­¸</h1>

<div class="section">
  <h2>ğŸ“Œ é¡Œç›®æè¿°</h2>
  <p>
    çµ¦å®šä¸€å€‹åªåŒ…å« <code>( ) { } [ ]</code> çš„å­—ä¸² <code>s</code>ï¼Œåˆ¤æ–·å…¶æ˜¯å¦ç‚ºæœ‰æ•ˆæ‹¬è™Ÿåºåˆ—ã€‚<br>
    æœ‰æ•ˆæ¢ä»¶ï¼šæ¯å€‹å·¦æ‹¬è™Ÿå¿…é ˆç”±ç›¸åŒé¡å‹çš„å³æ‹¬è™Ÿé–‰åˆï¼Œä¸”å¿…é ˆä»¥æ­£ç¢ºçš„é †åºé–‰åˆã€‚
  </p>
  <p>
    <strong>ç¯„ä¾‹ï¼š</strong><br>
    Input: s = "([])" â†’ Output: true<br>
    Input: s = "(]" â†’ Output: false
  </p>
</div>

<div class="section">
  <h2>ğŸ§  è§£é¡Œæ€è·¯</h2>
  <p>
    åˆ©ç”¨å †ç–Šï¼ˆstackï¼‰ä¾†æ¨¡æ“¬æ‹¬è™ŸåŒ¹é…ï¼š
  </p>
  <ol>
    <li>éæ­·å­—ä¸²ä¸­æ¯å€‹å­—ç¬¦ã€‚</li>
    <li>è‹¥é‡åˆ°å·¦æ‹¬è™Ÿï¼Œæ¨å…¥å †ç–Šã€‚</li>
    <li>è‹¥é‡åˆ°å³æ‹¬è™Ÿï¼Œæª¢æŸ¥å †ç–Šæ˜¯å¦ç‚ºç©ºæˆ–èˆ‡å †ç–Šé ‚éƒ¨å·¦æ‹¬è™Ÿä¸åŒ¹é…ï¼Œå‰‡è¿”å› falseï¼›å¦å‰‡ pop æ‰é ‚éƒ¨å·¦æ‹¬è™Ÿã€‚</li>
    <li>éæ­·çµæŸå¾Œï¼Œè‹¥å †ç–Šä¸ç‚ºç©ºï¼Œå‰‡è¿”å› falseï¼Œå¦å‰‡è¿”å› trueã€‚</li>
  </ol>
  <p>
    æ­¤æ–¹æ³•æ™‚é–“è¤‡é›œåº¦ç‚º O(n)ï¼Œç©ºé–“è¤‡é›œåº¦ç‚º O(n)ï¼ˆæœ€å£æƒ…æ³æ‰€æœ‰å­—ç¬¦çš†ç‚ºå·¦æ‹¬è™Ÿï¼‰ã€‚
  </p>
</div>

<div class="section">
  <h2>ğŸ”¢ é€æ­¥æ¨¡æ“¬</h2>
  <div class="btn-group">
    <label>è¼¸å…¥å­—ä¸² sï¼š<input type="text" id="inputStr" value="([])"/></label>
    <button onclick="startSimulation()">é–‹å§‹æ¨¡æ“¬</button>
    <button onclick="nextStep()">ä¸‹ä¸€æ­¥</button>
  </div>
  <p id="simOutput" style="text-align:center; font-weight:bold;">æ¨¡æ“¬ç‹€æ…‹é¡¯ç¤º</p>
  <div>
    <h3>æ¨¡æ“¬å †ç–Š (Stack)ï¼š</h3>
    <div class="stack-container" id="stackContainer"></div>
  </div>
</div>

<div class="section">
  <h2>ğŸ’» ç¨‹å¼ç¢¼å±•ç¤º</h2>
  <pre id="codeBox">
class Solution:
    def isValid(self, s: str) -> bool:
        stack = []  # ä½¿ç”¨å †ç–Šä¾†å„²å­˜å·¦æ‹¬è™Ÿ
        pairs = {   # æ‹¬è™Ÿå°æ‡‰é—œä¿‚
            '(': ')',
            '{': '}',
            '[': ']'
        }

        for bracket in s:
            if bracket in pairs:      # å¦‚æœæ˜¯å·¦æ‹¬è™Ÿ
                stack.append(bracket)
            elif len(stack) == 0 or bracket != pairs[stack.pop()]:
                return False          # å †ç–Šç©ºæˆ–ä¸åŒ¹é…ï¼Œè¿”å› False
        return len(stack) == 0        # è‹¥å †ç–Šç©ºï¼Œå‰‡æ‰€æœ‰æ‹¬è™ŸåŒ¹é…
  </pre>
  <div class="tips">
    ğŸ’¡ å°æŠ€å·§ï¼šåˆ©ç”¨å †ç–Šç‰¹æ€§ï¼Œå…ˆå…¥å¾Œå‡ºå¯ä»¥è‡ªç„¶æ¨¡æ“¬æ‹¬è™ŸåŒ¹é…ï¼›é€æ­¥æ¨¡æ“¬æ¯å€‹å­—ç¬¦çš„è™•ç†èƒ½å¹«åŠ©ä½ æ›´å¥½ç†è§£åŒ¹é…é‚è¼¯ã€‚
  </div>
</div>

<div class="section">
  <h2>â± æ™‚é–“èˆ‡ç©ºé–“è¤‡é›œåº¦</h2>
  <table>
    <tr>
      <th>åˆ†æé …ç›®</th>
      <th>èªªæ˜</th>
      <th>Big-O</th>
    </tr>
    <tr>
      <td>æ™‚é–“è¤‡é›œåº¦</td>
      <td>éæ­·å­—ä¸²æ¯å€‹å­—ç¬¦</td>
      <td>O(n)</td>
    </tr>
    <tr>
      <td>ç©ºé–“è¤‡é›œåº¦</td>
      <td>æœ€å£æƒ…æ³å †ç–Šé•·åº¦ç­‰æ–¼ n</td>
      <td>O(n)</td>
    </tr>
  </table>
</div>

<script>
let s = "";
let index = 0;
let stack = [];
const simOutput = document.getElementById("simOutput");
const stackContainer = document.getElementById("stackContainer");

function startSimulation() {
  s = document.getElementById("inputStr").value;
  index = 0;
  stack = [];
  updateStackDisplay();
  simOutput.innerText = `é–‹å§‹æ¨¡æ“¬ï¼šè¼¸å…¥å­—ä¸² s = "${s}"`;
  highlightCode(null);
}

function nextStep() {
  if (index >= s.length) {
    // æ¨¡æ“¬çµæŸï¼Œåˆ¤æ–·æ˜¯å¦æˆåŠŸ
    if (stack.length === 0) {
      simOutput.innerText = "æ¨¡æ“¬å®Œæˆï¼šæ‰€æœ‰æ‹¬è™ŸåŒ¹é…ï¼Œçµæœç‚º true";
    } else {
      simOutput.innerText = "æ¨¡æ“¬å®Œæˆï¼šä»æœ‰æœªåŒ¹é…çš„å·¦æ‹¬è™Ÿï¼Œçµæœç‚º false";
    }
    highlightCode("return");
    return;
  }
  let bracket = s[index];
  // é«˜äº®ç¨‹å¼ç¢¼ï¼šæ ¹æ“šæ˜¯å¦ç‚ºå·¦æ‹¬è™Ÿ
  if ("({[".includes(bracket)) {
    highlightCode("push");
    stack.push(bracket);
    simOutput.innerText = `ç¬¬ ${index+1} æ­¥ï¼šè®€å– "${bracket}"ï¼Œç‚ºå·¦æ‹¬è™Ÿï¼Œæ¨å…¥å †ç–Š`;
  } else {
    highlightCode("pop");
    if (stack.length === 0) {
      simOutput.innerText = `ç¬¬ ${index+1} æ­¥ï¼šè®€å– "${bracket}"ï¼Œä½†å †ç–Šç‚ºç©ºï¼ŒåŒ¹é…å¤±æ•—ï¼`;
      highlightCode("fail");
      return;
    }
    let last = stack.pop();
    const pairs = {
      '(': ')',
      '{': '}',
      '[': ']'
    };
    if (bracket !== pairs[last]) {
      simOutput.innerText = `ç¬¬ ${index+1} æ­¥ï¼šè®€å– "${bracket}"ï¼Œèˆ‡ "${last}" ä¸åŒ¹é…ï¼Œçµæœç‚º false`;
      highlightCode("fail");
      updateStackDisplay();
      return;
    } else {
      simOutput.innerText = `ç¬¬ ${index+1} æ­¥ï¼šè®€å– "${bracket}"ï¼Œèˆ‡ "${last}" åŒ¹é…ï¼Œå½ˆå‡ºå †ç–Š`;
    }
  }
  index++;
  updateStackDisplay();
}

function updateStackDisplay() {
  stackContainer.innerHTML = "";
  for (let i = stack.length - 1; i >= 0; i--) {
    let div = document.createElement("div");
    div.className = "stack-item";
    div.innerText = stack[i];
    stackContainer.appendChild(div);
  }
}

function highlightCode(context) {
  const codeBox = document.getElementById("codeBox");
  // å°‡ç¨‹å¼ç¢¼æ‹†æˆè¡Œï¼Œæ ¹æ“š context é«˜äº®ä¸åŒéƒ¨åˆ†
  const lines = codeBox.innerText.split("\n");
  let newHTML = "";
  for (let i = 0; i < lines.length; i++) {
    let line = lines[i];
    let id = "";
    if (context === "push" && line.includes("if bracket in pairs:")) {
      id = 'id="hl"';
    } else if (context === "pop" && line.includes("elif len(stack) == 0 or bracket != pairs[stack.pop()]")) {
      id = 'id="hl"';
    } else if (context === "fail" && (line.includes("return False") || line.includes("if len(stack) == 0"))){
      id = 'id="hl"';
    } else if (context === "return" && line.includes("return len(stack) == 0")) {
      id = 'id="hl"';
    }
    newHTML += `<div class="code-line" ${id}>${line}</div>`;
  }
  codeBox.innerHTML = newHTML;
}
</script>

</body>
</html>
