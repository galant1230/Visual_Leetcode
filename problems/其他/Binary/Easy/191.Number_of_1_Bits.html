
<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>LeetCode 191 - Number of 1 Bits è¦–è¦ºåŒ–è§£æ³•</title>
  <style>
    body { font-family: sans-serif; background: #f5f7fa; padding: 2rem; }
    h1 { text-align: center; color: #007acc; }
    .section {
      max-width: 900px;
      margin: 1rem auto;
      background: white;
      padding: 1.5rem 2rem;
      border-radius: 10px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    .binary {
      font-size: 1.2rem;
      font-family: monospace;
      text-align: center;
      margin: 1rem 0;
    }
    .bit {
      display: inline-block;
      width: 24px;
      height: 24px;
      line-height: 24px;
      border: 1px solid #ccc;
      margin: 2px;
      border-radius: 4px;
    }
    .bit.highlight {
      background-color: #2ecc71;
      color: white;
      font-weight: bold;
    }
    button {
      background: #007acc;
      color: white;
      padding: 10px 16px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      margin: 0.5rem;
    }
    .code-line {
      font-family: monospace;
      padding: 2px 0;
    }
    .active-code {
      background: #444;
      color: white;
    }
    #codeBox {
      background: #272822;
      color: #f8f8f2;
      padding: 1rem;
      border-radius: 6px;
      margin-top: 1rem;
    }
    .tips {
      background: #fef7dc;
      padding: 1rem;
      border-left: 6px solid #f1c40f;
      border-radius: 6px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 1rem;
    }
    th, td {
      border: 1px solid #ccc;
      padding: 0.75rem;
      text-align: center;
    }
  </style>
</head>
<body>

<h1>LeetCode 191 - Number of 1 Bits è¦–è¦ºåŒ–è§£æ³•</h1>

<div class="section">
  <h2>ğŸ“Œ é¡Œç›®æè¿°</h2>
  <p>çµ¦å®šä¸€å€‹ <strong>32-bit æ•´æ•¸</strong> <code>n</code>ï¼Œè«‹è¨ˆç®—å…¶äºŒé€²ä½ä¸­ <strong>1 çš„å€‹æ•¸</strong>ï¼ˆåˆç¨± Hamming Weightï¼‰ã€‚</p>
</div>

<div class="section">
  <h2>ğŸ§  è§£é¡Œæ€è·¯</h2>
  <p>æ¯æ¬¡ä½¿ç”¨ <code>n & (n - 1)</code>ï¼Œå¯ä»¥æ¶ˆé™¤æœ€å³é‚Šçš„ 1ï¼Œä¸¦ç´¯åŠ è¨ˆæ•¸ã€‚</p>
  <ul>
    <li>ä¾‹å¦‚ï¼šn = 9 (1001)</li>
    <li>Step 1: 1001 & 1000 = 1000 (count=1)</li>
    <li>Step 2: 1000 & 0111 = 0000 (count=2)</li>
  </ul>
</div>

<div class="section">
  <h2>ğŸ”¢ æ¨¡æ“¬è¨ˆç®—</h2>
  <div style="text-align:center;">
    <label>è¼¸å…¥æ•´æ•¸ nï¼š<input type="number" id="inputN" value="11" /></label>
    <button onclick="start()">é–‹å§‹æ¨¡æ“¬</button>
    <button onclick="step()">ä¸‹ä¸€æ­¥</button>
  </div>
  <div class="binary" id="binaryView"></div>
  <p id="output" style="text-align:center; font-weight:bold;"></p>
</div>

<div class="section">
  <h2>ğŸ§‘â€ğŸ’» ç¨‹å¼ç¢¼å±•ç¤º</h2>
  <div id="codeBox">
    <div class="code-line" id="c1">int hammingWeight(uint32_t n) {</div>
    <div class="code-line" id="c2">    int count = 0;</div>
    <div class="code-line" id="c3">    while (n != 0) {</div>
    <div class="code-line" id="c4">        n = n & (n - 1);</div>
    <div class="code-line" id="c5">        count++;</div>
    <div class="code-line" id="c6">    }</div>
    <div class="code-line" id="c7">    return count;</div>
    <div class="code-line" id="c8">}</div>
  </div>
</div>

<div class="section">
  <h2>â³ æ™‚é–“èˆ‡ç©ºé–“è¤‡é›œåº¦</h2>
  <table>
    <tr><th>é¡å‹</th><th>åˆ†æ</th><th>Big-O</th></tr>
    <tr><td>æ™‚é–“è¤‡é›œåº¦</td><td>æ¯æ¬¡ç§»é™¤ä¸€å€‹ 1ï¼Œæœ€å¤š k æ¬¡</td><td>O(k)</td></tr>
    <tr><td>ç©ºé–“è¤‡é›œåº¦</td><td>åªä½¿ç”¨ä¸€å€‹è¨ˆæ•¸è®Šæ•¸</td><td>O(1)</td></tr>
  </table>
</div>

<div class="section tips">
  <strong>ğŸ’¡ å°æŠ€å·§ï¼š</strong>
  <ul>
    <li><code>n & (n - 1)</code> æ˜¯ç¶“å…¸ä½å…ƒæŠ€å·§ï¼Œå¯å¿«é€Ÿç§»é™¤æœ€å¾Œä¸€å€‹ 1ã€‚</li>
    <li>æ¯”èµ·æƒæ 32 ä½æ›´å¿«ï¼Œå°¤å…¶ç•¶ 1 è¼ƒå°‘æ™‚ã€‚</li>
    <li>é€™é¡Œç¶“å¸¸å‡ºç¾åœ¨é¢è©¦ä¸­è€ƒä½å…ƒæ“ä½œã€‚</li>
  </ul>
</div>

<script>
let current = 0;
let n = 0;
let count = 0;

function toBinaryBits(num) {
  return num.toString(2).padStart(32, '0').split('');
}

function renderBits(bits) {
  const container = document.getElementById("binaryView");
  container.innerHTML = "";
  bits.forEach((b, i) => {
    const span = document.createElement("span");
    span.className = "bit";
    span.id = "bit-" + i;
    span.textContent = b;
    container.appendChild(span);
  });
}

function highlight(id) {
  document.querySelectorAll(".code-line").forEach(el => el.classList.remove("active-code"));
  if (id) document.getElementById(id).classList.add("active-code");
}

function start() {
  n = parseInt(document.getElementById("inputN").value);
  current = n;
  count = 0;
  renderBits(toBinaryBits(n));
  highlight("c1");
  document.getElementById("output").textContent = "é»æ“Šã€ä¸‹ä¸€æ­¥ã€æ¨¡æ“¬éç¨‹...";
}

function step() {
  if (current === 0) {
    highlight("c7");
    document.getElementById("output").textContent = `âœ… ç­”æ¡ˆï¼š${count} å€‹ 1`;
    return;
  }
  highlight("c4");
  current = current & (current - 1);
  count++;
  renderBits(toBinaryBits(current));
  highlight("c5");
  document.getElementById("output").textContent = `ç›®å‰ count = ${count}`;
}
</script>

</body>
</html>
