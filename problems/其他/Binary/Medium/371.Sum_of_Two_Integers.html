<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>LeetCode 371 - Sum of Two Integers è¦–è¦ºåŒ–è§£æ³•</title>
  <style>
    body { font-family: sans-serif; background: #f5f7fa; padding: 2rem; }
    h1 { text-align: center; color: #007acc; }
    .section {
      max-width: 900px;
      margin: 1rem auto;
      background: white;
      padding: 1.5rem 2rem;
      border-radius: 10px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    .bit-box {
      display: flex;
      flex-wrap: nowrap;
      overflow-x: auto;
      justify-content: flex-start;
      margin: 1rem 0;
    }
    .bit {
      width: 24px;
      height: 24px;
      line-height: 24px;
      text-align: center;
      border: 1px solid #ccc;
      margin: 2px;
      border-radius: 4px;
    }
    .bit.highlight {
      background: #2ecc71;
      color: white;
      font-weight: bold;
    }
    button {
      background: #007acc;
      color: white;
      padding: 10px 16px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      margin: 0.5rem;
    }
    .code-line {
      font-family: monospace;
      padding: 2px 0;
    }
    .active-code {
      background: #444;
      color: white;
    }
    #codeBox {
      background: #272822;
      color: #f8f8f2;
      padding: 1rem;
      border-radius: 6px;
      margin-top: 1rem;
    }
    .tips {
      background: #fef7dc;
      padding: 1rem;
      border-left: 6px solid #f1c40f;
      border-radius: 6px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 1rem;
    }
    th, td {
      border: 1px solid #ccc;
      padding: 0.75rem;
      text-align: center;
    }
  </style>
</head>
<body>

<h1>LeetCode 371 - Sum of Two Integers è¦–è¦ºåŒ–è§£æ³•</h1>

<div class="section">
  <h2>ğŸ“Œ é¡Œç›®æè¿°</h2>
  <p>çµ¦å®šå…©å€‹æ•´æ•¸ <code>a</code> å’Œ <code>b</code>ï¼Œè«‹ä¸ç”¨ä½¿ç”¨åŠ æ¸›æ³•ï¼Œè¨ˆç®— <code>a + b</code>ã€‚</p>
</div>

<div class="section">
  <h2>ğŸ§  è§£é¡Œæ€è·¯</h2>
  <p>åˆ©ç”¨ä½å…ƒé‹ç®—é€²è¡ŒåŠ æ³•ï¼š</p>
  <ul>
    <li><strong>XOR (a ^ b)</strong> ç”¨ä¾†è¨ˆç®—ä¸å«é€²ä½çš„å’Œã€‚</li>
    <li><strong>AND (a & b) << 1</strong> ç”¨ä¾†è¨ˆç®—é€²ä½ã€‚</li>
  </ul>
  <p>é‡è¤‡é€™å…©æ­¥ï¼Œç›´åˆ°é€²ä½ç‚º 0ï¼Œå³å¯å¾—åˆ°æœ€çµ‚ç­”æ¡ˆã€‚</p>
</div>

<div class="section">
  <h2>ğŸ”¢ ä½å…ƒæ¨¡æ“¬</h2>
  <div style="text-align:center;">
    <label>è¼¸å…¥æ•´æ•¸ a å’Œ bï¼ˆä»¥é€—è™Ÿåˆ†éš”ï¼‰ï¼š<input type="text" id="inputNums" value="5,3" /></label>
    <button onclick="start()">é–‹å§‹æ¨¡æ“¬</button>
    <button onclick="step()">ä¸‹ä¸€æ­¥</button>
  </div>
  <h3 style="text-align:center;">ç›®å‰ a çš„ä½å…ƒï¼š</h3>
  <div class="bit-box" id="bitA"></div>
  <h3 style="text-align:center;">ç›®å‰ b (é€²ä½) çš„ä½å…ƒï¼š</h3>
  <div class="bit-box" id="bitB"></div>
  <h3 style="text-align:center;">ç›®å‰ çµæœ (a ^ b)ï¼š</h3>
  <div class="bit-box" id="bitResult"></div>
  <p id="output" style="text-align:center; font-weight:bold;"></p>
</div>

<div class="section">
  <h2>ğŸ’» ç¨‹å¼ç¢¼å±•ç¤º</h2>
  <div id="codeBox">
    <div class="code-line" id="c1">int getSum(int a, int b) {</div>
    <div class="code-line" id="c2">    while (b != 0) {</div>
    <div class="code-line" id="c3">        int carry = (a & b) << 1; // è¨ˆç®—é€²ä½</div>
    <div class="code-line" id="c4">        a = a ^ b;              // è¨ˆç®—ä¸å«é€²ä½çš„å’Œ</div>
    <div class="code-line" id="c5">        b = carry;              // æ›´æ–°é€²ä½</div>
    <div class="code-line" id="c6">    }</div>
    <div class="code-line" id="c7">    return a;</div>
    <div class="code-line" id="c8">}</div>
  </div>
</div>

<div class="section">
  <h2>â± æ™‚é–“èˆ‡ç©ºé–“è¤‡é›œåº¦</h2>
  <table>
    <tr><th>é¡å‹</th><th>åˆ†æ</th><th>Big-O</th></tr>
    <tr><td>æ™‚é–“è¤‡é›œåº¦</td><td>æ¯æ¬¡é€²ä½ç§»ä½ï¼Œæœ€å¤š O(log n) æ¬¡</td><td>O(log n)</td></tr>
    <tr><td>ç©ºé–“è¤‡é›œåº¦</td><td>åªä½¿ç”¨å¸¸æ•¸è®Šæ•¸</td><td>O(1)</td></tr>
  </table>
</div>

<div class="section tips">
  <strong>ğŸ’¡ å°æŠ€å·§ï¼š</strong>
  <ul>
    <li>æ­¤æ–¹æ³•åˆ©ç”¨ä½å…ƒé‹ç®—ï¼Œä¸ä½¿ç”¨åŠ æ³•å’Œæ¸›æ³•ï¼Œé©åˆé¢è©¦è€ƒå¯Ÿã€‚</li>
    <li>XOR ç”¨æ–¼è¨ˆç®—ç„¡é€²ä½çš„å’Œï¼ŒAND æ­é…å·¦ç§»è¨ˆç®—é€²ä½ã€‚</li>
    <li>é€²ä½è¨ˆç®—çš„æ¬¡æ•¸èˆ‡æ•¸å€¼å¤§å°æœ‰é—œï¼Œé€šå¸¸æ˜¯ O(log n) æ¬¡ã€‚</li>
  </ul>
</div>

<script>
let a = 0, b = 0, stepCount = 0;

function toBits(x) {
  // å°‡æ•¸å­—è½‰æˆ32ä½å…ƒäºŒé€²ä½é™£åˆ—
  return x.toString(2).padStart(32, '0').split('');
}

function renderBits(containerId, bits) {
  const container = document.getElementById(containerId);
  container.innerHTML = '';
  bits.forEach(bit => {
    const span = document.createElement('span');
    span.className = 'bit';
    span.textContent = bit;
    container.appendChild(span);
  });
}

function highlight(id) {
  document.querySelectorAll(".code-line").forEach(el => el.classList.remove("active-code"));
  if (id) document.getElementById(id).classList.add("active-code");
}

function start() {
  const nums = document.getElementById("inputNums").value.split(',').map(Number);
  a = nums[0];
  b = nums[1];
  stepCount = 0;
  renderBits("bitA", toBits(a));
  renderBits("bitB", toBits(b));
  renderBits("bitResult", toBits(a ^ b));
  highlight("c1");
  document.getElementById("output").innerText = "é»æ“Šã€ä¸‹ä¸€æ­¥ã€é–‹å§‹æ¨¡æ“¬éç¨‹ï¼";
}

function step() {
  // ç•¶ b ç‚º 0 æ™‚ï¼Œè¡¨ç¤ºæ²’æœ‰é€²ä½ï¼Œè¨ˆç®—å®Œæˆ
  if (b === 0) {
    highlight("c7");
    document.getElementById("output").innerText = `âœ… çµæœï¼š${a}`;
    return;
  }
  highlight("c2");
  let carry = (a & b) << 1;  // è¨ˆç®—é€²ä½
  highlight("c3");
  let sumWithoutCarry = a ^ b; // è¨ˆç®—ä¸å«é€²ä½çš„å’Œ
  highlight("c4");
  a = sumWithoutCarry;  // æ›´æ–° a ç‚ºç•¶å‰å’Œ
  highlight("c5");
  b = carry;  // æ›´æ–° b ç‚ºé€²ä½
  renderBits("bitA", toBits(a));
  renderBits("bitB", toBits(b));
  renderBits("bitResult", toBits(a ^ b));
  stepCount++;
  document.getElementById("output").innerText = `ç¬¬ ${stepCount} æ­¥å®Œæˆ`;
}
</script>

</body>
</html>
