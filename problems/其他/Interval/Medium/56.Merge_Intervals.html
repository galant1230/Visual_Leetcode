<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>56. Merge Intervals - è¦–è¦ºåŒ–æ¨¡æ“¬</title>
  <style>
    body { font-family: 'Segoe UI', sans-serif; padding: 2rem; background: #f9f9f9; }
    .container { background: #fff; padding: 2rem; border-radius: 10px; max-width: 900px; margin: auto; box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
    h2, h3 { color: #007bff; }
    input, button { padding: 6px 12px; font-size: 14px; margin: 0.3rem; border-radius: 4px; border: 1px solid #ccc; }
    button { background-color: #007bff; color: white; border: none; cursor: pointer; }
    .interval { display: inline-block; padding: 6px 10px; margin: 4px; background: #e3f2fd; border-radius: 4px; border: 1px solid #90caf9; transition: all 0.3s ease; }
    .merged { background-color: #ffe082; border-color: #ffca28; font-weight: bold; }
    .active { border: 2px solid red; }
    .status-box { font-family: monospace; background: #f1f8e9; padding: 1rem; border-left: 5px solid #8bc34a; white-space: pre-wrap; margin-top: 1rem; max-height: 300px; overflow-y: auto; }
    #resultArea { margin-top: 1.5rem; min-height: 60px; }
  </style>
</head>
<body>
<div class="container">
  <h2>ğŸ“š 56. Merge Intervals</h2>

  <details open>
    <summary>ğŸ§  é¡Œç›®è§£èªªèˆ‡æ™‚é–“/ç©ºé–“è¤‡é›œåº¦</summary>
    <div style="padding: 1rem; background: #f9f9f9; border-left: 4px solid #007bff; margin: 1rem 0;">
      <p><strong>é¡Œç›®æè¿°ï¼š</strong>çµ¦å®šä¸€å€‹å€é–“é™£åˆ— intervalsï¼Œå…¶ä¸­ intervals[i] = [start_i, end_i]ï¼Œè«‹ä½ åˆä½µæ‰€æœ‰é‡ç–Šçš„å€é–“ï¼Œä¸¦å›å‚³åˆä½µå¾Œçš„çµæœã€‚</p>
      <ul>
        <li>å…ˆä¾ç…§ start å€¼é€²è¡Œæ’åº</li>
        <li>ä¾åºéæ­·æ¯å€‹å€é–“ï¼Œå¦‚æœèˆ‡å‰ä¸€å€‹å€é–“ç„¡é‡ç–Šå°±ç›´æ¥åŠ å…¥</li>
        <li>è‹¥æœ‰é‡ç–Šå°±åˆä½µï¼ˆå–æœ€å¤§ endï¼‰</li>
      </ul>
      <p><strong>æ™‚é–“è¤‡é›œåº¦ï¼š</strong> O(n log n)ï¼ˆæ’åºæˆæœ¬ï¼‰</p>
      <p><strong>ç©ºé–“è¤‡é›œåº¦ï¼š</strong> O(n)ï¼ˆçµæœè¼¸å‡ºé™£åˆ—ï¼‰</p>
    </div>
  </details>

  <h3>ğŸ§ª è¼¸å…¥</h3>
  <input id="intervalsInput" value="[[1,3],[2,6],[8,10],[15,18]]" />
  <button onclick="startMerge()">ğŸ” é–‹å§‹åˆä½µ</button>
  <button onclick="stepMerge()">ğŸ§­ ä¸‹ä¸€æ­¥</button>
  <div id="resultArea"></div>
  <div class="status-box" id="logBox"></div>

  <h3>ğŸ“„ ç¨‹å¼ç¢¼</h3>
  <div style="background:#272822;color:#f8f8f2;padding:1rem;border-radius:6px;font-family:monospace;white-space:pre-wrap;">
class Solution:
    def merge(self, intervals: List[List[int]]) -> List[List[int]]:
        if not intervals:
            return []
        intervals.sort()

        result = []
        for interval in intervals:
            # append list : first element or non overlapping(curr.start > prev.end)
            if(result == [] or result[-1][1] < interval[0]):
                result.append(interval)
            # overlapping interval : (curr.start < prev.end)
            else:
                result[-1][1] = max(result[-1][1], interval[1])
        
        return result
  </div>
</div>

<script>
let intervals = [], merged = [], index = 0;

function startMerge() {
  intervals = JSON.parse(document.getElementById("intervalsInput").value);
  intervals.sort((a, b) => a[0] - b[0]);
  merged = [intervals[0]];
  index = 1;
  document.getElementById("logBox").innerText = "";
  render();
}

function stepMerge() {
  if (index >= intervals.length) return;
  const logBox = document.getElementById("logBox");
  const last = merged[merged.length - 1];
  const current = intervals[index];
  if (last[1] >= current[0]) {
    last[1] = Math.max(last[1], current[1]);
    logBox.innerText += `ğŸ” åˆä½µ ${JSON.stringify(current)} åˆ° ${JSON.stringify(last)}\n`;
  } else {
    merged.push(current);
    logBox.innerText += `ğŸ“Œ ç„¡é‡ç–Šï¼ŒåŠ å…¥æ–°å€é–“ ${JSON.stringify(current)}\n`;
  }
  index++;
  render();
}

function render() {
  const resultDiv = document.getElementById("resultArea");
  resultDiv.innerHTML = "";
  merged.forEach((intv, idx) => {
    const box = document.createElement("span");
    box.className = "interval merged";
    if (idx === merged.length - 1 && index <= intervals.length) box.classList.add("active");
    box.innerText = `[${intv[0]}, ${intv[1]}]`;
    resultDiv.appendChild(box);
  });
  if (index < intervals.length) {
    const current = document.createElement("span");
    current.className = "interval active";
    current.innerText = `[${intervals[index][0]}, ${intervals[index][1]}]`;
    resultDiv.appendChild(current);
  }
}
</script>
</body>
</html>
