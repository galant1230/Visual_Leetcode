<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>57. Insert Interval - è¦–è¦ºåŒ–æ¨¡æ“¬</title>
  <style>
    body { font-family: 'Segoe UI', sans-serif; padding: 2rem; background: #f8f9fa; }
    .container { background: white; padding: 2rem; border-radius: 10px; max-width: 900px; margin: auto; box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
    h2, h3 { color: #007bff; }
    input, button { padding: 6px 12px; font-size: 14px; margin: 0.3rem; border-radius: 4px; border: 1px solid #ccc; }
    button { background-color: #007bff; color: white; border: none; cursor: pointer; }
    .interval { display: inline-block; padding: 6px 10px; margin: 4px; background: #e3f2fd; border-radius: 4px; border: 1px solid #90caf9; transition: all 0.3s ease; }
    .merged { background-color: #ffe082; border-color: #ffca28; font-weight: bold; }
    .inserted { background-color: #c8e6c9; border-color: #66bb6a; font-weight: bold; }
    .status-box { font-family: monospace; background: #f1f8e9; padding: 1rem; border-left: 5px solid #8bc34a; white-space: pre-wrap; margin-top: 1rem; max-height: 300px; overflow-y: auto; }
    #resultArea { margin-top: 1.5rem; min-height: 60px; }
    #codeBox {
      background: #272822; color: #f8f8f2; padding: 1rem;
      border-radius: 6px; margin-top: 2rem;
      font-family: monospace; white-space: pre-wrap;
    }
  </style>
</head>
<body>
<div class="container">
  <h2>ğŸ§© 57. Insert Interval</h2>

  <h3>ğŸ“˜ é¡Œç›®æè¿°</h3>
  <p>çµ¦å®šä¸€çµ„ <code>intervals</code>ï¼ˆå·²æ’åºã€äº’ä¸é‡ç–Šï¼‰ï¼Œæ’å…¥ä¸€å€‹æ–°çš„å€é–“ä¸¦åˆä½µé‡ç–Šéƒ¨åˆ†ã€‚</p>

  <details open>
    <summary>ğŸ§  è§£é¡Œæ€è·¯èˆ‡æ™‚é–“ç©ºé–“åˆ†æ</summary>
    <div style="padding: 1rem; background: #f8f9fa; border-left: 4px solid #007bff; margin-top: 1rem;">
      <ol>
        <li><strong>åˆå§‹åŒ–çµæœé™£åˆ— <code>res</code> å’Œç´¢å¼• <code>i</code></strong>ï¼š<br>ç”¨ä¾†å­˜æ”¾åˆä½µå¾Œçš„çµæœï¼Œi æ˜¯ç”¨ä¾†éæ­· intervals çš„æŒ‡æ¨™ã€‚</li>
        <li><strong>åŠ å…¥ä¸æœƒé‡ç–Šçš„å·¦å´å€é–“</strong>ï¼š<br>åªè¦ç›®å‰å€é–“ intervals[i] çš„çµæŸæ™‚é–“å°æ–¼ newInterval çš„é–‹å§‹æ™‚é–“ï¼Œå°±è¡¨ç¤ºå®ƒå€‘æ²’æœ‰äº¤é›†ï¼Œå¯ä»¥ç›´æ¥åŠ å…¥åˆ°çµæœä¸­ã€‚</li>
        <li><strong>åˆä½µé‡ç–Šçš„å€é–“</strong>ï¼š<br>åªè¦ç›®å‰å€é–“ intervals[i] çš„é–‹å§‹æ™‚é–“å°æ–¼ç­‰æ–¼ newInterval çš„çµæŸæ™‚é–“ï¼Œå°±è¡¨ç¤ºé€™å…©å€‹å€é–“æœ‰é‡ç–Šï¼Œæˆ‘å€‘å°±æ“´å±• newInterval çš„ç¯„åœï¼š
          <pre><code>newInterval[0] = min(newInterval[0], intervals[i][0])
newInterval[1] = max(newInterval[1], intervals[i][1])</code></pre>
        </li>
        <li><strong>åŠ å…¥åˆä½µå¾Œçš„ newInterval</strong>ï¼š<br>æ‰€æœ‰é‡ç–Šè™•ç†å®Œä¹‹å¾Œï¼ŒæŠŠåˆä½µå¥½çš„ newInterval æ”¾é€² resã€‚</li>
        <li><strong>åŠ å…¥ä¸æœƒé‡ç–Šçš„å³å´å€é–“</strong>ï¼š<br>å‰©ä¸‹çš„å€é–“éƒ½åœ¨ newInterval çš„å³é‚Šï¼Œä¹Ÿå°±æ˜¯ä¸é‡ç–Šçš„ï¼Œå¯ä»¥ç›´æ¥åŠ å…¥ã€‚</li>
        <li><strong>å›å‚³çµæœ</strong>ï¼š<br>æœ€çµ‚å›å‚³åˆä½µå¥½çš„çµæœé™£åˆ— resã€‚</li>
      </ol>
      <p><strong>âœ… ç‰¹é»ï¼š</strong></p>
      <ul>
        <li>æ™‚é–“è¤‡é›œåº¦ï¼š<code>O(n)</code>ï¼Œæ¯å€‹å€é–“æœ€å¤šçœ‹ä¸€æ¬¡ã€‚</li>
        <li>ç©ºé–“è¤‡é›œåº¦ï¼š<code>O(n)</code>ï¼Œå„²å­˜çµæœç”¨çš„ç©ºé–“ã€‚</li>
      </ul>
    </div>
  </details>

  <h3>ğŸ§ª è¼¸å…¥</h3>
  <label>Intervals:</label>
  <input id="intervalsInput" value="[[1,3],[6,9]]" />
  <label>Insert:</label>
  <input id="newIntervalInput" value="[2,5]" />
  <button onclick="startSimulation()">ğŸ” é–‹å§‹æ¨¡æ“¬</button>
  <button onclick="nextStep()">ğŸ§­ ä¸‹ä¸€æ­¥</button>
  <button onclick="autoPlay()">â–¶ï¸ è‡ªå‹•æ’­æ”¾</button>

  <div id="resultArea"></div>
  <div class="status-box" id="logBox"></div>

  <h3>ğŸ“„ ç¨‹å¼ç¢¼</h3>
  <div id="codeBox"></div>
</div>

<script>
const code = `class Solution:
    def insert(self, intervals, newInterval):
        result = []
        for i in range(len(intervals)):
            if newInterval[1] < intervals[i][0]:
                result.append(newInterval)
                return result + intervals[i:]
            elif newInterval[0] > intervals[i][1]:
                result.append(intervals[i])
            else:
                newInterval[0] = min(newInterval[0], intervals[i][0])
                newInterval[1] = max(newInterval[1], intervals[i][1])
        result.append(newInterval)
        return result`;

document.getElementById("codeBox").innerText = code;

let intervals = [], newInterval = [], result = [], i = 0, phase = "init", autoTimer;

function startSimulation() {
  intervals = JSON.parse(document.getElementById("intervalsInput").value);
  newInterval = JSON.parse(document.getElementById("newIntervalInput").value);
  result = [];
  i = 0;
  phase = "scan";
  document.getElementById("logBox").innerText = "";
  document.getElementById("resultArea").innerHTML = "";
  renderResult();
}

function nextStep() {
  const logBox = document.getElementById("logBox");
  if (phase === "done") return;

  if (i < intervals.length && intervals[i][1] < newInterval[0]) {
    logBox.innerText += `ğŸ“Œ ä¿ç•™å€é–“ ${JSON.stringify(intervals[i])}\n`;
    result.push(intervals[i]);
    i++;
  } else if (i < intervals.length && intervals[i][0] <= newInterval[1]) {
    logBox.innerText += `ğŸ” åˆä½µ ${JSON.stringify(newInterval)} å’Œ ${JSON.stringify(intervals[i])}\n`;
    newInterval[0] = Math.min(newInterval[0], intervals[i][0]);
    newInterval[1] = Math.max(newInterval[1], intervals[i][1]);
    i++;
  } else {
    if (phase !== "inserted") {
      logBox.innerText += `âœ… æ’å…¥åˆä½µå¾Œçš„æ–°å€é–“ ${JSON.stringify(newInterval)}\n`;
      result.push(newInterval);
      phase = "inserted";
    } else if (i < intervals.length) {
      logBox.innerText += `ğŸ“Œ ä¿ç•™å¾Œæ®µ ${JSON.stringify(intervals[i])}\n`;
      result.push(intervals[i]);
      i++;
    } else {
      phase = "done";
      logBox.innerText += `ğŸ‰ çµæŸï¼Œå…± ${result.length} å€‹å€é–“ã€‚`;
    }
  }
  renderResult();
}

function autoPlay() {
  if (autoTimer) clearInterval(autoTimer);
  autoTimer = setInterval(() => {
    if (phase !== "done") nextStep();
    else clearInterval(autoTimer);
  }, 700);
}

function renderResult() {
  const resultDiv = document.getElementById("resultArea");
  resultDiv.innerHTML = result.map(intv => {
    const cls = (intv[0] === newInterval[0] && intv[1] === newInterval[1]) ? 'interval merged' : 'interval';
    return `<span class="${cls}">[${intv[0]}, ${intv[1]}]</span>`;
  }).join("");
}
</script>
</body>
</html>

