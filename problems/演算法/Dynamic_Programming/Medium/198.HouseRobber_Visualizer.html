
<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <title>🏠 LeetCode 198: House Robber - DP 視覺化</title>
  <style>
    body {
      font-family: 'Microsoft JhengHei', sans-serif;
      background: #f4f4f4;
      padding: 20px;
      display: flex;
      justify-content: center;
    }
    .container {
      background: #fff;
      border: 1px solid #ccc;
      border-radius: 8px;
      padding: 20px;
      width: 100%;
      max-width: 1000px;
    }
    input {
      font-family: 'Microsoft JhengHei', sans-serif;
      font-size: 14px;
      padding: 6px;
      width: 100%;
      margin-bottom: 8px;
    }
    button {
      font-size: 14px;
      padding: 6px 12px;
      margin: 8px 4px 0 0;
    }
    .desc {
      font-size: 14px;
      margin-bottom: 12px;
      line-height: 1.6;
    }
    .house-row {
      display: flex;
      gap: 10px;
      margin-top: 20px;
    }
    .house {
      padding: 10px;
      width: 50px;
      height: 50px;
      background: #e0e0e0;
      border-radius: 8px;
      text-align: center;
      font-weight: bold;
      line-height: 30px;
      font-size: 14px;
      position: relative;
    }
    .highlight {
      background: #4caf50 !important;
      color: white;
    }
    .dp-row {
      margin-top: 16px;
      display: flex;
      gap: 10px;
    }
    .dp-cell {
      background: #fffde7;
      padding: 6px;
      border: 1px solid #ccc;
      border-radius: 6px;
      width: 60px;
      text-align: center;
    }
    .code {
      font-family: 'Microsoft JhengHei', monospace;
      margin-top: 20px;
      background: #f1f1f1;
      padding: 10px;
      border-radius: 6px;
    }
    .code span {
      display: block;
      padding: 2px 4px;
    }
    .highlight-line {
      background: #fff59d;
    }
  </style>
</head>
<body>
<div class="container">
  <h2>🏠 LeetCode 198: House Robber - DP 視覺化</h2>

  <div class="desc">
    有一排房子，每間房子內有不同金額的財寶。不能搶相鄰的兩間。<br>
    請找出最多能搶多少錢。<br><br>
    <b>dp[i]</b> 表示搶到第 i 間房子時能搶的最大金額。<br>
    狀態轉移：<code>dp[i] = max(dp[i-1], dp[i-2] + nums[i])</code><br>
    時間複雜度 <code>O(n)</code>，空間複雜度 <code>O(n)</code>
  </div>

  <input id="inputNums" value="2,7,9,3,1" />
  <button onclick="start()">開始</button>
  <button onclick="step()">下一步</button>

  <div class="house-row" id="houseRow"></div>
  <div class="dp-row" id="dpRow"></div>
  <div class="desc" id="explanation"></div>

  <div class="code">
    <span>def rob(nums):</span>
    <span> if not nums: return 0</span>
    <span> if len(nums) == 1: return nums[0]</span>
    <span> dp = [0] * len(nums)</span>
    <span> dp[0] = nums[0]</span>
    <span> dp[1] = max(nums[0], nums[1])</span>
    <span> for i in range(2, len(nums)):</span>
    <span>  dp[i] = max(dp[i-1], dp[i-2] + nums[i])</span>
    <span> return dp[-1]</span>
  </div>
</div>

<script>
let nums = [], dp = [], idx = 2;

function start() {
  nums = document.getElementById("inputNums").value.split(',').map(Number);
  dp = Array(nums.length).fill(0);
  idx = 2;

  const houseRow = document.getElementById("houseRow");
  houseRow.innerHTML = nums.map((v, i) => `<div class="house" id="house${i}">${v}</div>`).join('');

  const dpRow = document.getElementById("dpRow");
  dp[0] = nums[0];
  dp[1] = Math.max(nums[0], nums[1]);
  dpRow.innerHTML = dp.map((v, i) =>
    `<div class="dp-cell" id="dp${i}">${i < 2 ? v : ""}</div>`).join('');

  document.getElementById("explanation").innerText = "初始化：dp[0] = nums[0]，dp[1] = max(nums[0], nums[1])";

  document.querySelectorAll('.code span').forEach(e => e.classList.remove('highlight-line'));
}

function step() {
  if (idx >= nums.length) {
    document.getElementById("explanation").innerHTML = `✅ 完成！最大金額為 dp[${nums.length - 1}] = ${dp[nums.length - 1]}`;
    return;
  }

  const houseRow = document.getElementById("houseRow");
  for (let i = 0; i < nums.length; i++) {
    document.getElementById("house" + i).classList.remove("highlight");
  }

  document.getElementById("house" + idx).classList.add("highlight");
  document.getElementById("house" + (idx - 2)).classList.add("highlight");

  dp[idx] = Math.max(dp[idx - 1], dp[idx - 2] + nums[idx]);
  document.getElementById("dp" + idx).textContent = dp[idx];

  document.getElementById("explanation").innerText =
    `dp[${idx}] = max(dp[${idx - 1}] = ${dp[idx - 1]}, dp[${idx - 2}] + nums[${idx}] = ${dp[idx - 2]} + ${nums[idx]}) = ${dp[idx]}`;

  document.querySelectorAll('.code span').forEach(e => e.classList.remove('highlight-line'));
  document.querySelectorAll('.code span')[7].classList.add('highlight-line');
  document.querySelectorAll('.code span')[8].classList.add('highlight-line');

  idx++;
}
</script>
</body>
</html>
