<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>Decode Ways å¯è¦–åŒ–æ¨¡æ“¬å™¨</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #f9f9f9;
      padding: 2rem;
      margin: 0;
      color: #333;
    }
    h2, h3 {
      color: #007acc;
    }
    .container {
      max-width: 1000px;
      margin: auto;
      background: #fff;
      padding: 2rem;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    }
    button {
      padding: 8px 16px;
      font-size: 14px;
      margin: 0.3rem;
      cursor: pointer;
      border: none;
      border-radius: 6px;
      background: #007acc;
      color: white;
    }
    input {
      padding: 6px;
      margin: 0.2rem;
      width: 200px;
    }
    ul {
      padding-left: 1.2rem;
    }
    .code-box {
      background: #272822;
      color: #f8f8f2;
      padding: 1rem;
      border-radius: 6px;
      margin: 2rem 0;
      font-family: monospace;
    }
    .code-line {
      padding: 2px 0;
    }
    .active-code {
      background-color: #444;
    }
    .char-row, .dp-row {
      display: flex;
      gap: 10px;
      margin-top: 10px;
      flex-wrap: wrap;
    }
    .char, .dp-cell {
      padding: 10px;
      width: 40px;
      height: 40px;
      border-radius: 6px;
      text-align: center;
      font-weight: bold;
      font-size: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .char {
      background: #e0e0e0;
    }
    .dp-cell {
      background: #fffde7;
      border: 1px solid #ccc;
      font-size: 14px;
    }
    .highlight {
      background: #4caf50 !important;
      color: white;
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>ğŸ” 91. è§£ç¢¼æ–¹æ³•ï¼ˆDecode Waysï¼‰</h2>

    <hr>
    <h3>ğŸ“˜ é¡Œç›®æè¿°</h3>
    <p>ä¸€å€‹æ•¸å­—å­—ä¸²ä»£è¡¨ç·¨ç¢¼ï¼Œæ¯å€‹å­—æ¯å°æ‡‰ 1 åˆ° 26ï¼ˆA-Zï¼‰ã€‚è¨ˆç®—æœ‰å¤šå°‘ç¨®ä¸åŒæ–¹å¼å¯ä»¥å°‡æ­¤å­—ä¸²è§£ç¢¼ã€‚</p>

    <hr>
    <h3>ğŸ§ª ç¯„ä¾‹</h3>
    <pre><code>è¼¸å…¥ï¼šs = "12"
è¼¸å‡ºï¼š2
è§£é‡‹ï¼š"AB"ï¼ˆ1 2ï¼‰æˆ– "L"ï¼ˆ12ï¼‰

è¼¸å…¥ï¼šs = "226"
è¼¸å‡ºï¼š3
è§£é‡‹ï¼š"BZ"ï¼ˆ2 26ï¼‰ã€"VF"ï¼ˆ22 6ï¼‰ã€"BBF"ï¼ˆ2 2 6ï¼‰</code></pre>

    <hr>
    <h3>â³ æ™‚é–“èˆ‡ç©ºé–“è¤‡é›œåº¦</h3>
    <p><strong>æ™‚é–“è¤‡é›œåº¦ï¼š</strong> <code>O(n)</code></p>
    <p><strong>ç©ºé–“è¤‡é›œåº¦ï¼š</strong> <code>O(n)</code></p>

    <hr>
    <h3>â–¶ï¸ æ¨¡æ“¬å™¨</h3>
    <label>è¼¸å…¥å­—ä¸² s: <input id="inputString" value="226"></label>
    <button onclick="start()">ğŸ”ƒ é–‹å§‹</button>
    <button onclick="stepWithCode()">ğŸ§­ ä¸‹ä¸€æ­¥</button>

    <div style="display: flex; gap: 10px; margin-left: 50px;" class="char-row" id="charRow"></div>
    <div class="dp-row" id="dpRow"></div>
    <p id="explanation">ç‹€æ…‹èªªæ˜æœƒå‡ºç¾åœ¨é€™è£¡</p>

    <div class="code-box">
      <div class="code-line" id="c0">1: if not s or s[0] == '0': return 0</div>
      <div class="code-line" id="c1">2: dp = [0] * (len(s) + 1)</div>
      <div class="code-line" id="c2">3: dp[0], dp[1] = 1, 1</div>
      <div class="code-line" id="c3">4: for i in range(2, len(s)+1):</div>
      <div class="code-line" id="c4">5:&nbsp;&nbsp;&nbsp;&nbsp;if s[i-1] != '0':</div>
      <div class="code-line" id="c5">6:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dp[i] += dp[i-1]</div>
      <div class="code-line" id="c6">7:&nbsp;&nbsp;&nbsp;&nbsp;if 10 &lt;= int(s[i-2:i]) &lt;= 26:</div>
      <div class="code-line" id="c7">8:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dp[i] += dp[i-2]</div>
      <div class="code-line" id="c8">9: return dp[-1]</div>
    </div>
  </div>

  <script>
    let s = "", dp = [], idx = 2, explanation = "", resultShown = false;

    function start() {
      s = document.getElementById("inputString").value;
      dp = Array(s.length + 1).fill(0);
      dp[0] = 1;
      dp[1] = s[0] === '0' ? 0 : 1;
      idx = 2;
      resultShown = false;

      document.getElementById("charRow").innerHTML = "<div style='width: 13px;'></div>" + s.split('').map((c, i) =>
        `<div class="char" id="char${i}">${c}</div>`).join('');
      document.getElementById("dpRow").innerHTML = dp.map((v, i) =>
        `<div class="dp-cell" id="dp${i}">${v}</div>`).join('');
      document.getElementById("explanation").innerText =
        `åˆå§‹åŒ–ï¼šdp[0] = ${dp[0]}, dp[1] = ${dp[1]}`;
    }

    function step() {
      if (idx > s.length) {
        document.getElementById("explanation").innerText += `\nâœ… è§£ç¢¼æ–¹æ³•ç¸½æ•¸ï¼š${dp[s.length]}`;
        resultShown = true;
        return;
      }

      let oneDigit = parseInt(s.slice(idx - 1, idx));
      let twoDigit = parseInt(s.slice(idx - 2, idx));

      let info = "";
      if (oneDigit >= 1) {
        dp[idx] += dp[idx - 1];
        info += `ä¸€ä½æ•¸ ${oneDigit} æœ‰æ•ˆï¼Œ+dp[${idx - 1}] = ${dp[idx - 1]}\n`;
      }
      if (twoDigit >= 10 && twoDigit <= 26) {
        dp[idx] += dp[idx - 2];
        info += `å…©ä½æ•¸ ${twoDigit} æœ‰æ•ˆï¼Œ+dp[${idx - 2}] = ${dp[idx - 2]}\n`;
      }

      document.getElementById("dp" + idx).textContent = dp[idx];
      document.getElementById("explanation").innerText = `ğŸ”¢ i = ${idx}\ndp[${idx}] = ${dp[idx]}\n` + info;

      for (let i = 0; i < s.length; i++) {
        document.getElementById("char" + i).classList.remove("highlight");
      }
      if (idx - 1 < s.length) document.getElementById("char" + (idx - 1)).classList.add("highlight");
      if (idx - 2 < s.length) document.getElementById("char" + (idx - 2)).classList.add("highlight");

      idx++;
    }

    function stepWithCode() {
      if (resultShown) return;

      if (idx > s.length) {
        highlightLine(8);
        step();
        return;
      }

      let highlightLines = [3];
      let oneDigit = parseInt(s.slice(idx - 1, idx));
      let twoDigit = parseInt(s.slice(idx - 2, idx));

      if (oneDigit >= 1) {
        highlightLines.push(4, 5);
      }
      if (twoDigit >= 10 && twoDigit <= 26) {
        highlightLines.push(6, 7);
      }

      document.querySelectorAll(".code-line").forEach(e => e.classList.remove("active-code"));
      highlightLines.forEach(i => {
        const el = document.getElementById("c" + i);
        if (el) el.classList.add("active-code");
      });

      step();
    }

    function highlightLine(lineId) {
      document.querySelectorAll(".code-line").forEach(e => e.classList.remove("active-code"));
      const el = document.getElementById("c" + lineId);
      if (el) el.classList.add("active-code");
    }
  </script>
</body>
</html>

